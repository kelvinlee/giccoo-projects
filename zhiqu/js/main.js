// Generated by CoffeeScript 1.9.1
var ANIMATION_END_NAME, ANIMATION_END_NAMES, TRANSITION_END_NAME, TRANSITION_END_NAMES, VENDORS, awardList, backBottle, backBottleMain, brandShow, clearNone, css3Prefix, global, i, imageList, images, imgs, init, j, len, loadEnd, loadStart, mTestElement, openAward, openBottle, openBottleMain, openBrand, openMedia, opened, page, pages, tags, test;

VENDORS = ["Moz", 'webkit', 'ms', 'O'];

TRANSITION_END_NAMES = {
  "Moz": "transitionend",
  "webkit": "webkitTransitionEnd",
  "ms": "MSTransitionEnd",
  "O": "oTransitionEnd"
};

ANIMATION_END_NAMES = {
  "Moz": "animationend",
  "webkit": "webkitAnimationEnd",
  "ms": "MSAnimationEnd",
  "O": "oAnimationEnd"
};

mTestElement = document.createElement("div");

for (j = 0, len = VENDORS.length; j < len; j++) {
  i = VENDORS[j];
  css3Prefix = i;
  if ((css3Prefix + "Transition") in mTestElement.style) {
    break;
  }
  css3Prefix = false;
}

if (css3Prefix) {
  TRANSITION_END_NAME = TRANSITION_END_NAMES[css3Prefix];
  ANIMATION_END_NAME = ANIMATION_END_NAMES[css3Prefix];
}

Array.prototype.clean = function(deleteValue) {
  i = 0;
  while (i < this.length) {
    if (this[i] === deleteValue) {
      this.splice(i, 1);
      i--;
    }
    i++;
  }
  return this;
};

HTMLElement.prototype.getStyle = function(className) {
  if (this.currentStyle) {
    return this.currentStyle(className);
  } else {
    return document.defaultView.getComputedStyle(this, false)[className];
  }
};

(function() {
  var lastTime, vendors, x;
  lastTime = 0;
  vendors = ["webkit", "moz"];
  x = 0;
  while (x > vendors.length && !window.requestAnimationFrame) {
    console.log("" + vendors[x]);
  }
  window.requestAnimationFrame = window[vendors[x] + "RequestAnimationFrame"];
  window.cancelAnimationFrame = window[vendors[x] + "CancelAnimationFrame"] || window[vendors[x] + "CancelRequestAnimationFrame"];
  ++x;
  if (!window.requestAnimationFrame) {
    window.requestAnimationFrame = function(callback, element) {
      var currTime, id, timeToCall;
      currTime = new Date().getTime();
      timeToCall = Math.max(0, 16.7 - (currTime - lastTime));
      id = window.setTimeout(function() {
        callback(currTime + timeToCall);
      }, timeToCall);
      lastTime = currTime + timeToCall;
      return id;
    };
  }
  if (!window.cancelAnimationFrame) {
    window.cancelAnimationFrame = function(id) {
      clearTimeout(id);
    };
  }
})();

images = "";

imageList = ["img/pages-contactus-bg.png", "img/bg.jpg", "img/bottle-award-shadow.png", "img/bottle-award-white.png", "img/bottle-award.png", "img/bottle-brand-white.png", "img/bottle-brand.png", "img/bottle-contactus-shadow.png", "img/bottle-contactus-white.png", "img/bottle-contactus.png", "img/bottle-lighter-fire.png", "img/bottle-lighter.png", "img/bottle-logo-full-white-1.png", "img/bottle-logo-full-white-2.png", "img/bottle-logo-full.png", "img/bottle-logo-next-white-1.png", "img/bottle-logo-next-white-2.png", "img/bottle-logo-next-white-3.png", "img/bottle-logo-next-white-4.png", "img/bottle-logo-next-white.png", "img/bottle-logo-next.png", "img/bottle-logo-white.png", "img/bottle-logo.png", "img/bottle-media-shadow.png", "img/bottle-media-white.png", "img/bottle-media.png", "img/bottle-strategy-shadow.png", "img/bottle-strategy-white.png", "img/bottle-strategy.png", "img/bottle-technology-shadow.png", "img/bottle-technology-white.png", "img/bottle-technology.png", "img/bottom-bottle.png", "img/homepage-bubble.png", "img/icon-brand-1.png", "img/icon-brand-10.png", "img/icon-brand-11.png", "img/icon-brand-12.png", "img/icon-brand-2.png", "img/icon-brand-3.png", "img/icon-brand-4.png", "img/icon-brand-5.png", "img/icon-brand-6.png", "img/icon-brand-7.png", "img/icon-brand-8.png", "img/icon-brand-9.png", "img/icon-logo-bmw.png", "img/magn.png", "img/middle-tower.png", "img/pages-award-bg.png", "img/pages-award-icon-1.png", "img/pages-award-icon-2.png", "img/pages-award-icon-3.png", "img/pages-award-icon-4.png", "img/pages-award-icon-5.png", "img/pages-award-icon-6.png", "img/pages-award-icon-7.png", "img/pages-award-other-1.png", "img/pages-award-other-2.png", "img/pages-brand-bg.jpg", "img/pages-brand-line.png", "img/pages-contactus-drops.png", "img/pages-contactus-offon.png", "img/pages-contactus-pointer.png", "img/pages-contactus-qrcode.png", "img/pages-contactus-text.png", "img/pages-logo-bg-end.jpg", "img/pages-logo-bg-start.jpg", "img/pages-logo-text.png", "img/pages-media-bg.png", "img/pages-media-bottle-1.png", "img/pages-media-bottle-2.png", "img/pages-media-bottle-3.png", "img/pages-media-bottle-4.png", "img/pages-media-bottle-5.png", "img/pages-media-bottle-6.png", "img/pages-media-bottle-7.png", "img/pages-media-icon-1.png", "img/pages-media-icon-10.png", "img/pages-media-icon-11.png", "img/pages-media-icon-12.png", "img/pages-media-icon-2.png", "img/pages-media-icon-3.png", "img/pages-media-icon-4.png", "img/pages-media-icon-5.png", "img/pages-media-icon-6.png", "img/pages-media-icon-7.png", "img/pages-media-icon-8.png", "img/pages-media-icon-9.png", "img/pages-strategy-arrow-yellow.png", "img/pages-strategy-arrow.png", "img/pages-strategy-box.png", "img/pages-strategy-canvas-1.png", "img/pages-strategy-canvas-2.png", "img/pages-strategy-icloud-1.png", "img/pages-strategy-icloud-2.png", "img/pages-strategy-icloud-3.png", "img/pages-strategy-icons.png", "img/pages-strategy-light-all-1.png", "img/pages-strategy-light-all-2.png", "img/pages-strategy-light-all-3.png", "img/pages-strategy-light-all-4.png", "img/pages-strategy-light-all.png", "img/pages-strategy-light-blue.png", "img/pages-strategy-light-red.png", "img/pages-strategy-lighter.png", "img/pages-strategy-line-1.png", "img/pages-strategy-line-2.png", "img/pages-strategy-logo.png", "img/pages-strategy-m-bottom.png", "img/pages-strategy-m-top.png", "img/pages-strategy-parts-red.png", "img/pages-strategy-parts-roulette.png", "img/pages-strategy-parts-yellow.png", "img/pages-strategy-people-1.png", "img/pages-strategy-people-2.png", "img/pages-strategy-screw.png", "img/pages-strategy-switch.png", "img/pages-technology-bottom.png", "img/pages-technology-top.png", "img/right-tower-sound.png", "img/right-tower-timer.png", "img/search-tower.png", "img/time-tower.png", "img/animate/bottle-award/award.png", "img/animate/bottle-brand/brand.png", "img/animate/bottle-contactus/contactus.png", "img/animate/bottle-logo/logo.png", "img/animate/bottle-media/media.png", "img/animate/bottle-strategy/strategy.png", "img/animate/bottle-technology/technology.png", "img/animate/bottle-technology/logo.png", "img/animate/brands/brand-1.png", "img/animate/brands/brand-2.png", "img/animate/strategy-icons/p1.png", "img/animate/strategy-icons/p2.png", "img/animate/strategy-icons/strategy.png", "img/technology/b-1.png", "img/technology/b-2.png", "img/technology/b-3.png", "img/technology/b-4.png", "img/technology/b-5.png", "img/technology/box.png", "img/technology/bt-1.png", "img/technology/bt-2.png", "img/technology/gear-1.png", "img/technology/gear-2.png", "img/technology/gear-3.png", "img/technology/p-1.png", "img/technology/hand.png", "img/technology/i-1.png", "img/technology/i-2.png", "img/technology/i-3.png", "img/technology/i-4.png", "img/technology/i-5.png", "img/technology/l-1.png", "img/technology/l-2.png", "img/technology/l-3.png", "img/technology/l-4.png", "img/technology/l-5.png", "img/technology/p-0.png", "img/technology/p-2.png", "img/technology/p-3.png", "img/technology/p-4.png", "img/technology/p-5.png", "img/technology/pages-technology-top.png", "img/technology/switch.png", "img/technology/t-1.png", "img/technology/t-2.png", "img/technology/t-3.png", "img/technology/t-4.png", "img/technology/t-5.png"];

imgs = [];

page = ["page-brand"];

pages = [".pages-brand"];

opened = false;

global = {};

tags = null;

window.onload = function() {
  riot.mount("*");
  $(".bottle-logo-next").css({
    bottom: 164 - $("body").height() * 0.13 - 18
  });
  $(".pages-award .icon").on("click", openAward);
  $(".pages-media .bottle-media-movie").on("click", openMedia);
  $(".pages-brand .item").on("click", openBrand);
  $(".firstPage .content").on("click", init);
  $(".pages-media .icons-1 .icon").on("touchstart", function(evt) {
    $(".alert", this).addClass("on");
    evt.stopPropagation();
    return evt.preventDefault();
  });
  return $(".pages-media .icons-1 .icon").on("touchend", function(evt) {
    $(".alert", this).removeClass("on");
    evt.stopPropagation();
    return evt.preventDefault();
  });
};

init = function() {
  $(".firstPage").addClass("on");
  return setTimeout(function() {
    return loadStart();
  }, 1500);
};

test = function() {};

loadStart = function() {
  var count, ep, now;
  count = $("[data-layzr]").length;
  now = 0;
  ep = $("#loading-text");
  $("[data-layzr]").on("load", function() {
    now++;
    ep.text(parseInt(now / count * 100));
    if (now >= count) {
      return loadEnd();
    }
  });
  return $("[data-layzr]").each(function() {
    return $(this).attr("src", $(this).attr("data-layzr"));
  });
};

loadEnd = function() {
  return setTimeout(function() {
    $(".firstPage").addClass("fadeOut animated");
    return setTimeout(function() {
      return $(".firstPage").remove();
    }, 500);
  }, 1500);
};

openBottle = function(evt) {
  var name;
  if (opened) {
    return false;
  }
  console.log(evt);
  name = $(evt).attr("page-name");
  $(evt).next().addClass("on");
  $(".bottle-" + name).addClass("Mybottle");
  $(".homepage").addClass("page-" + name);
  $(".pages-" + name).show();
  setTimeout(function() {
    return $(".pages-" + name).addClass("thispage");
  }, 1);
  return opened = true;
};

backBottle = function(name) {
  $(".homepage").removeClass("page-" + name);
  $(".bottle-" + name + " .white").removeClass("on");
  $(".pages-" + name).removeClass("thispage");
  $(".bottle-" + name).removeClass("Mybottle");
  setTimeout(function() {
    return $(".pages-" + name).hide();
  }, 2000);
  return opened = false;
};

openBottleMain = function(evt) {
  var name;
  if (opened) {
    return false;
  }
  name = $(evt).attr("page-name");
  $(evt).next().addClass("on");
  $(".bottle-" + name).addClass("Mybottle");
  $(".main").addClass("page-" + name);
  $(".pages-" + name).show();
  $(".pages-" + name).addClass("thispage");
  opened = true;
  $(".bottle" + name + ".gif").removeClass("normal replay stop").addClass("replay");
  if (name === "brand") {
    return brandShow();
  }
};

backBottleMain = function(name) {
  $(".main").removeClass("page-" + name);
  $(".bottle-" + name + " .white").removeClass("on");
  $(".pages-" + name).removeClass("thispage");
  $(".bottle-" + name).removeClass("Mybottle");
  $(".bottle" + name + ".gif").removeClass("normal replay stop").addClass("normal");
  return clearNone();
};

awardList = [{}];

openBrand = function(evt) {
  var e, n;
  evt.stopPropagation();
  e = $(evt.target);
  return n = e.attr("rel");
};

openAward = function(evt) {
  var e, n;
  evt.stopPropagation();
  e = $(evt.target).parents(".icon");
  n = e.attr("rel");
  $(".page-award .pop").show();
  $(".page-award .pop .pop-content").html('<div class="alert-' + n + '"><img src="img/pages-award-alert-' + n + '.jpg" /></div>');
  return $(".page-award .pop").on("click", function() {
    return $(".page-award .pop").hide();
  });
};

openMedia = function(evt) {
  var e, n;
  evt.stopPropagation();
  e = $(evt.target).parents(".icon");
  n = e.attr("rel");
  $(".page-media .pop").show();
  return $(".page-media .pop").on("click", function() {
    return $(".page-media .pop").hide();
  });
};

clearNone = function() {
  return setTimeout(function() {
    return opened = false;
  }, 500);
};

brandShow = function() {
  console.log(global.brandbg != null, global.brand != null);
  $(".pages-brand .content").hide();
  return setTimeout(function() {
    return $(".pages-brand .content").show();
  }, 1700);
};
