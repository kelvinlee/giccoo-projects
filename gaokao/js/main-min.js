function neteaseShare(){var e,t,n,a,o;return a="高考，你准备好了吗",e="http://m.giccoo.com/gaokao/img/ico.jpg",t="http://m.giccoo.com/gaokao/",o="高考，你准备好了吗",n="",window.location.href="orpheus://share/"+encodeURIComponent(a)+"/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(o)+"/"+encodeURIComponent(n),console.log("run after?")}function initAll(){stageW=640,stageH=screenH/screenW*640,document.getElementById("mainCanvas").width=640,document.getElementById("mainCanvas").height=stageH,createjs.Ticker.framerate=30,createjs.Ticker.addEventListener("tick",handleTick),goLoading()}function handleTick(){stage.update()}function goLoading(){stage.addChild(stage1),stage1.addChild(p1bg),TweenLite.set(p1bg,{scaleX:1,scaleY:stageH/1e3}),setP1title(),p1title.gotoAndPlay("shake"),TweenLite.set(p1title,{regX:320,regY:150.5,x:320,y:.4255*stageH}),setLoadingBar()}function showP1(){TweenLite.to(p1title,1,{y:258.5}),setP1btn(),p1go.gotoAndPlay("shake"),TweenLite.set(p1go,{y:stageH}),TweenLite.to(p1go,1,{y:stageH-188,delay:.1}),setP1pic(),setLogo(),logo("white"),TweenLite.set(p1btn,{display:"block"})}function goP2(){TweenLite.set($("#btnshare"),{display:"none"}),stage.addChildAt(stage2,0),stage2.addChild(p2bg),TweenLite.set(p2bg,{y:stageH,regY:1386}),p1title.visible=!1,p1go.visible=!1,TweenLite.to(p1bg,.5,{scaleY:0,y:stageH});for(var e=1;e<=10;e++)TweenLite.set(p1picA[e-1],{alpha:0,delay:.05*e,onComplete:removeTar,onCompleteParams:[p1picA[e-1]]});logo("black"),TweenLite.set(userName,{display:"block",bottom:350/stageH*screenH,left:309/640*screenW,height:63/640*screenW,width:.425*screenW}),TweenLite.set(UserTextarea,{"font-size":50/640*screenW}),TweenLite.set(type1btn,{height:.15625*screenW,width:.125*screenW,bottom:.296875*screenW,left:.63125*screenW,display:"block"}),TweenLite.set(type2btn,{height:.15625*screenW,width:.125*screenW,bottom:.296875*screenW,left:487/640*screenW,display:"block"}),typeMark.graphics.beginFill("#989898").drawRect(0,0,17,6),stage2.addChild(typeMark),TweenLite.set(typeMark,{alpha:0}),stage2.addChild(boy),TweenLite.set(boy,{y:.2*stageH,regY:140,regX:126,x:126}),setUserPic(),TweenLite.set(p2start,{display:"block"})}function removeTar(e){p1pic.removeChild(e)}function goP3(){TweenLite.to(boy,1,{alpha:0}),logo("black")}function goP4(){"other"!=sys&&TweenLite.set($("#btnshare"),{display:"block"}),TweenLite.set(btnA,{display:"none"}),TweenLite.set(btnB,{display:"none"}),TweenLite.set(btnC,{display:"none"}),TweenLite.set(btnD,{display:"none"}),TweenLite.set($("#submitBtn"),{display:"none"}),TweenLite.set($("#nextBtn"),{display:"none"}),TweenLite.set($("#backBtn"),{display:"none"}),stage.addChild(stage4),TweenLite.from(stage4,.5,{alpha:0,onComplete:savePic}),TweenLite.set($("#endBtns"),{display:"block",opacity:0}),TweenLite.to($("#endBtns"),.5,{display:"block",opacity:1}),logo("white"),stage4.addChild(p4bg),TweenLite.set(p4bg,{regY:1300,y:stageH}),p4bgABCD=new createjs.Bitmap(p4bgABCDA[examType]),p4bgtypeA=new createjs.Bitmap(p4bgtypeA[wlType]),stage4.addChild(p4bgABCD),stage4.addChild(p4bgtypeA),TweenLite.set(p4bgABCD,{regY:1300,y:stageH}),TweenLite.set(p4bgtypeA,{regY:1300,y:stageH});var e=1;if(stageH<1e3&&stageH>900)var e=(stageH-900)/100;else stageH<=900&&(e=0);stage4.addChild(boy2),TweenLite.set(boy2,{y:.2*stageH-60*(1-e),regY:140-40*(1-e),regX:126,x:126,scale:.7+.3*e}),75*finalScore[4]<=300?endCopy=new createjs.Bitmap("img/endcopy1.png"):75*finalScore[4]>300&&75*finalScore[4]<=450?endCopy=new createjs.Bitmap("img/endcopy2.png"):75*finalScore[4]>450&&75*finalScore[4]<=600?endCopy=new createjs.Bitmap("img/endcopy3.png"):75*finalScore[4]>600&&75*finalScore[4]<750?endCopy=new createjs.Bitmap("img/endcopy4.png"):75*finalScore[4]==750&&(endCopy=new createjs.Bitmap("img/endcopy5.png")),stage4.addChild(endCopy),TweenLite.set(endCopy,{y:.2*stageH-9-60*(1-e),regY:131-40*(1-e),regX:188,x:188,scale:.7+.3*e});for(var t=0;t<5;t++)stage4.addChild(score12345A[t]),score12345A[t].text=75*finalScore[t],score12345A[t].textAlign="center",TweenLite.set(score12345A[t],{y:stageH-157,x:109+105*t});userInputName.text=UserInput.value,userInputName.textAlign="center",stage4.addChild(userInputName),TweenLite.set(userInputName,{x:437,y:stageH-451}),userPhoto=new createjs.Bitmap(convertCanvasToImage($("#imageCtrl")[0])),stage4.addChild(userPhoto),TweenLite.set(userPhoto,{y:stageH-485,x:61}),TweenLite.set($("#endbtn1"),{display:"block"}),TweenLite.set($("#endbtn2"),{display:"block"}),TweenLite.set($("#endbtn3"),{display:"block"})}function savePic(){document.getElementById("pngHolder").appendChild(convertCanvasToImage($("#mainCanvas")[0]))}function neteaseShare(){var e,t,n,a,o;return a="高考，你准备好了吗",e="http://m.giccoo.com/gaokao",t="http://m.giccoo.com/gaokao",o="高考，你准备好了吗",n="",window.location.href="orpheus://share/"+encodeURIComponent(a)+"/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(o)+"/"+encodeURIComponent(n),console.log("run after?")}function neteaseShareImage(e){var t,n,a;return a="高考，你准备好了吗",t="http://image.giccoo.com/upload/gaokao/"+e+"@!large",n="http://m.giccoo.com/gaokao/",console.log("orpheus://sharepic?picUrl="+encodeURIComponent(t)+"&shareUrl="+encodeURIComponent(n)+"&wbDesc="+encodeURIComponent(a)+"&qqDesc="+encodeURIComponent(a)),window.location.href="orpheus://sharepic?picUrl="+encodeURIComponent(t)+"&shareUrl="+encodeURIComponent(n)+"&wbDesc="+encodeURIComponent(a)+"&qqDesc="+encodeURIComponent(a)}function upload(e){var t;return t={image:e,folder:"gaokao"},axios.post(imageurl,t).then(function(e){200===e.data.recode&&(console.log(e.data.info),neteaseShareImage(e.data.info))}).catch(function(e){})}function convertCanvasToImage(e){var t=new Image;return t.src=e.toDataURL("image/png"),t}var global={},sys="other";$(document).ready(function e(){window.navigator.userAgent.indexOf("NeteaseMusic")>-1?(sys="NeteaseMusic",TweenLite.set($("#btnshare"),{display:"block"})):(loadWechatConfig(),wx.ready(function(){var e;return e={title:"高考，你准备好了吗",desc:"",link:"http://m.giccoo.com/gaokao/",imgUrl:"http://m.giccoo.com/gaokao/img/ico.png",success:function(){},cancel:function(){}},wx.onMenuShareTimeline(e),wx.onMenuShareAppMessage(e),wx.onMenuShareQQ(e),wx.onMenuShareWeibo(e)})),initAll(),riot.mount("*")});var wlType=3,examType=parseInt(4*Math.random()),nowQ=0,lastQ=0,allAnswer=[[[2,2,4,1,3,1,1,3,2,2],[4,1,4,3,3,1,3,3,4,4],[4,3,3,4,3,3,4,3,4,4],[3,2,3,4,3,4,2,3,4,3]],[[2,2,4,1,3,1,4,4,2,1],[4,1,4,3,3,1,2,4,2,4],[4,3,3,4,3,3,2,4,1,4],[3,2,3,4,3,4,2,4,2,2]]],btnType=[[[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,2,0,1,0,0],[0,3,0,0,0,2,2,1,0,0],[0,0,0,0,0,0,0,1,0,0]],[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0],[0,3,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]]],userAnswer=[0,0,0,0,0,0,0,0,0,0],screenW,screenH;screenW=document.body.offsetWidth,screenH=document.body.offsetHeight;var stageW=640,stageH,loadWechatConfig=function(){var e,t,n;n=encodeURIComponent(window.location.href.split("#")[0]),e=document.createElement("script"),e.src="http://api.giccoo.com/api/config?url="+n,t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)};$("#shareBtn").click(neteaseShare);var stage=new createjs.Stage("mainCanvas"),stage1=new createjs.Container,p1bg=new createjs.Bitmap("img/bg.jpg"),p1btn=$("#p1btn");p1btn.click(function(){TweenLite.set(p1btn,{display:"none"}),goP2()});var stage2=new createjs.Container,p2bg=new createjs.Bitmap("img/p2bg.jpg"),userName=$("#userName"),UserTextarea=$("#UserTextarea"),type1btn=$("#type1btn"),type2btn=$("#type2btn"),typeMark=new createjs.Shape,boy=new createjs.Bitmap("img/boy.png"),p2start=$("#p2start"),stage4=new createjs.Container,p4bg=new createjs.Bitmap("img/p4bg.png"),p4bgABCDA=["img/p4bga.png","img/p4bgb.png","img/p4bgc.png","img/p4bgd.png"],p4bgtypeA=["img/p4bgtype0.png","img/p4bgtype1.png"],p4bgABCD,p4bgtype,boy2=boy.clone(),endCopy,score1=new createjs.Text("150","28px Arial","#000000"),score2=new createjs.Text("150","28px Arial","#000000"),score3=new createjs.Text("150","28px Arial","#000000"),score4=new createjs.Text("150","28px Arial","#000000"),score5=new createjs.Text("150","28px Arial","#000000"),score12345A=[score1,score2,score3,score4,score5],userInputName=new createjs.Text("哈哈哈哈哈","50px Arial","#000000"),userPhoto;$("#btnshare").click(function(){neteaseShare()});var data;$("#endbtn1").click(function(){"other"==sys?(TweenLite.set($("#pngHolder"),{display:"block",opacity:1}),TweenLite.set($("#shareHint"),{display:"block"})):upload($("#mainCanvas")[0].toDataURL("image/png"))});var imageurl="http://api.giccoo.com/api/upload/image64/";$("#pngHolder").click(function(){TweenLite.set($("#pngHolder"),{display:"none",opacity:1}),TweenLite.set($("#shareHint"),{display:"none"})});var closeBtn=$("#closeBtn"),answerA=[[$("#p4ansewr0_0"),$("#p4ansewr0_1"),$("#p4ansewr0_2"),$("#p4ansewr0_3")],[$("#p4ansewr1_0"),$("#p4ansewr1_1"),$("#p4ansewr1_2"),$("#p4ansewr1_3")]];$("#endbtn2").click(function(){TweenLite.set($("#rightAnswer"),{display:"block",height:673/640*screenW}),TweenLite.set(answerA[wlType][examType],{display:"block"}),TweenLite.set(closeBtn,{display:"block",width:"7.5%",right:0,y:screenH-1.13125*screenW})}),closeBtn.click(function(){TweenLite.set(closeBtn,{display:"none"}),TweenLite.set($("#rightAnswer"),{display:"none"})}),$("#endbtn3").click(function(){window.location.href="http://www.hbyangyuan.com/"});