!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("inMap",[],t):"object"==typeof exports?exports.inMap=t():e.inMap=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=39)}([function(e,t,n){"use strict";function i(e){var t=Object.prototype.toString;return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[t.call(e)]}function r(e){return"function"==i(e)}function o(e){return"string"==i(e)}function a(e){return"object"==i(e)}function s(e){return"array"==i(e)}function l(e){var t=window.devicePixelRatio;e.canvas.width=e.canvas.width*t,e.canvas.height=e.canvas.height*t,e.canvas.style.width=e.canvas.width/t+"px",e.canvas.style.height=e.canvas.height/t+"px",e.scale(t,t)}function u(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e,t,n,i){for(var r=!1,o=90,a=-90,s=180,l=-180,u=0;u<t.length;u++)t[u]>a&&(a=t[u]),t[u]<o&&(o=t[u]),e[u]>l&&(l=e[u]),e[u]<s&&(s=e[u]);if(!(n<o||n>a||i<s||i>l))for(var c=0;c<t.length;c++){var h=(c+1)%t.length;t[c]<n!=t[h]<n&&i<(e[h]-e[c])*(n-t[c])/(t[h]-t[c])+e[c]&&(r=!r)}return r}function h(e,t,n){for(var i=[],r=[],o=0,a=n.length;o<a;o++)i.push(parseFloat(n[o][1])),r.push(parseFloat(n[o][0]));return c(i,r,e,t)}function f(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function p(){var e=Array.prototype.slice.call(arguments);return v.default.all(e,{arrayMerge:function(e,t){return t.length>0?t:e}})}Object.defineProperty(t,"__esModule",{value:!0}),t.chunk=t.extend=t.isPromiseLike=t.isEmpty=void 0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.typeOf=i,t.isFunction=r,t.isString=o,t.isObject=a,t.isArray=s,t.setDevicePixelRatio=l,t.encodeHTML=u,t.isPolyContains=c,t.isPolyContainsPt=h,t.detectmob=f,t.merge=p;var y=n(7),v=function(e){return e&&e.__esModule?e:{default:e}}(y);t.isEmpty=function(e){return null==e||!(Object.keys(e)||e).length},t.isPromiseLike=function(e){return null!==e&&("object"===(void 0===e?"undefined":d(e))||"function"==typeof e)&&"function"==typeof e.then},t.extend=function(e,t){if(e&&t&&a(t)){for(var n in t)e[n]=t[n];for(var i,r=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],o=0;o<r.length;o++)i=r[o],Object.prototype.constructor.call(t,i)&&(e[i]=t[i])}return e},t.chunk=function(e,t){return Array.from({length:Math.ceil(e.length/t)},function(n,i){return e.slice(i*t,i*t+t)})}},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(11),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(0),c=n(5),h=1;t.CanvasOverlay=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.ctx=null,n.eventType="moveend",n.map=null,n.tOnResize=n.tOnResize.bind(n),n.tOnMoveend=n.tOnMoveend.bind(n),n.tOnZoomstart=n.tOnZoomstart.bind(n),n.tOnZoomend=n.tOnZoomend.bind(n),n.tOnMoving=n.tOnMoving.bind(n),n.tMousemove=n.tMousemove.bind(n),n.tMouseleave=n.tMouseleave.bind(n),n.tMouseClick=n.tMouseClick.bind(n),n.devicePixelRatio=window.devicePixelRatio,n.repaintEnd=e&&e.repaintEnd,n.animationFlag=!0,n}return o(t,e),a(t,[{key:"initialize",value:function(e){var t=this;return this.map=e,this.container=document.createElement("canvas"),this.ctx=this.container.getContext("2d"),this.container.style.cssText="position:absolute;left:0;top:0;z-index:"+h+++";",e.getPanes().mapPane.appendChild(this.container),this.setCanvasSize(),e.addEventListener("resize",t.tOnResize),e.addEventListener("moveend",t.tOnMoveend),e.addEventListener("moving",t.tOnMoving),e.addEventListener("zoomstart",t.tOnZoomstart),e.addEventListener("zoomend",t.tOnZoomend),e.addEventListener("mousemove",t.tMousemove),this.container.addEventListener("mouseleave",t.tMouseleave),e.addEventListener("click",t.tMouseClick),this.TInit(),this.container}},{key:"tMapStyle",value:function(e){var t=null;(0,u.isString)(e)?t="Blueness"==e?c.Blueness:c.WhiteLover:(0,u.isObject)(e)&&(t=e),e&&this.map&&this.map.setMapStyle({styleJson:t})}},{key:"tOnResize",value:function(e){this.setCanvasSize(),this.tDraw(this,e)}},{key:"tOnMoveend",value:function(e){this.animationFlag=!0,this.eventType=e.type,this.tDraw(this,e)}},{key:"tOnZoomstart",value:function(){this.animationFlag=!1,this.clearCanvas()}},{key:"tOnZoomend",value:function(e){this.animationFlag=!0,this.eventType=e.type,this.tDraw(this,e)}},{key:"tOnMoving",value:function(e){this.animationFlag=!1,this.eventType=e.type}},{key:"tMouseleave",value:function(){}},{key:"tMousemove",value:function(){}},{key:"TInit",value:function(){}},{key:"draw",value:function(){this.resize()}},{key:"tMouseClick",value:function(){}},{key:"tDraw",value:function(e,t){this.eventType=t.type,e.resize(),this.repaintEnd&&this.repaintEnd(this),e.keysss=!0}},{key:"resize",value:function(){}},{key:"canvasResize",value:function(){var e=this.map,t=this.container,n=e.getCenter(),i=e.getSize(),r=e.pointToOverlayPixel(n);t.style.left=r.x-i.width/2+"px",t.style.top=r.y-i.height/2+"px"}},{key:"clearCanvas",value:function(){var e=this.map.getSize();this.getContext().clearRect(0,0,e.width,e.height)}},{key:"setCanvasSize",value:function(){var e=this.map.getSize();this.container.width=e.width,this.container.height=e.height,(0,u.setDevicePixelRatio)(this.ctx)}},{key:"getContext",value:function(){return this.ctx}},{key:"setZIndex",value:function(e){this.container.style.zIndex=e}},{key:"Tclear",value:function(){}},{key:"Tdispose",value:function(){}},{key:"dispose",value:function(){this.map.removeEventListener("resize",this.tOnResize),this.map.removeEventListener("moveend",this.tOnMoveend),this.map.removeEventListener("zoomstart",this.tOnZoomstart),this.map.removeEventListener("zoomend",this.tOnZoomend),this.map.removeEventListener("moving",this.tOnMoving),this.map.removeEventListener("mousemove",this.tMousemove),this.container.removeEventListener("mouseleave",this.tMouseleave),this.map.removeEventListener("click",this.tMouseClick),this.Tclear(),this.Tdispose(),this.map.removeOverlay(this)}}]),t}(l.default)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=n(2),u=n(9),c=(0,s.detectmob)();t.Parameter=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.points=[],o.baseConfig=e,o._setStyle(e,n),o.selectItem=[],o.overItem=null,o.workerData=[],o.tooltipDom=null,o.legendDom=null,o.tooltipTemplate=null,o}return o(t,e),a(t,[{key:"_setStyle",value:function(e,t){t=t||{};var n=(0,s.merge)(e,t);this.toRgba(n.style),this._option=n,this.tooltip=n.tooltip,this.legend=n.legend,this.event=n.event,this.style=n.style,this.points=t.data?n.data:this.points,this.tMapStyle(n.skin)}},{key:"setOptionStyle",value:function(){}},{key:"toRgba",value:function(e){["normal","mouseOver","selected"].forEach(function(t){var n=e[t];n&&["backgroundColor","borderColor","shadowColor"].forEach(function(i){var r=n[i];r&&-1==r.indexOf("rgba")&&(e[t][i]=new u.Color(r).getRgbaStyle())})}),e.colors&&e.colors.forEach(function(e,t,n){-1==e.indexOf("rgba")&&(n[t]=new u.Color(e).getRgbaStyle())})}},{key:"setDrawStyle",value:function(e){var t=this.style.normal,n=this.style.mouseOver,i=this.style.selected,r={};r=(0,s.merge)(r,t);for(var o=this.style.splitList,a=0;a<o.length;a++){var l=o[a];if(null==l.end){if(e.count>=l.start){r=(0,s.merge)(t,l);break}}else if(e.count>=l.start&&e.count<l.end){r=(0,s.merge)(t,l);break}}if(r=(0,s.merge)(r,e.style||{}),n&&this.overItem==e&&(r=(0,s.merge)(r,n,{backgroundColor:n.backgroundColor||this.brightness(r.backgroundColor,.1)})),i&&this.selectItemContains(e)&&(r=(0,s.merge)(r,i)),null!=r.shadowBlur&&null==r.shadowColor&&(r.shadowColor=new u.Color(r.backgroundColor).getStyle()),r.opacity){var c=new u.Color(r.backgroundColor);r.backgroundColor=c.getRgbaStyle(r.opacity)}if(r.borderOpacity){var h=new u.Color(r.borderColor);r.borderColor=h.getRgbaStyle(r.borderOpacity)}return r}},{key:"brightness",value:function(e,t){var n=new u.Color(e);return n.r+=t,n.g+=t,n.b+=t,n.getStyle()}},{key:"selectItemContains",value:function(e){return this.findIndexSelectItem(e)>-1}},{key:"findIndexSelectItem",value:function(e){return-1}},{key:"deleteSelectItem",value:function(e){var t=this.findIndexSelectItem(e);t>-1&&this.selectItem.splice(t,1)}},{key:"compileTooltipTemplate",value:function(e){e="`"+e.replace(/\{/g,"${overItem.")+"`",this.tooltipTemplate=new Function("overItem","return "+e)}},{key:"setWorkerData",value:function(e){this.workerData=e}},{key:"setTooltip",value:function(e){var t=this.tooltip,n=t.show,i=t.customClass,r=t.offsets,o=t.formatter;if(null==this.tooltipDom&&(this.tooltipDom=document.createElement("div"),this.tooltipDom.classList.add("inmap-tooltip"),this.tooltipDom.classList.add(i),this.map._inmapOption.toolDom.appendChild(this.tooltipDom)),!n)return void(this.tooltipDom.style.display="none");if(this.overItem){var a=this.overItem;(0,s.isFunction)(o)?this.tooltipDom.innerHTML=o(a):(0,s.isString)(o)&&(this.tooltipTemplate||this.compileTooltipTemplate(o),this.tooltipDom.innerHTML=this.tooltipTemplate(a)),this.tooltipDom.style.left=e.offsetX+r.left+"px",this.tooltipDom.style.top=e.offsetY+r.top+"px",this.tooltipDom.style.display="block"}else this.tooltipDom.style.display="none"}},{key:"Tclear",value:function(){this.tooltipDom&&(this.tooltipDom.parentNode.removeChild(this.tooltipDom),this.tooltipDom=null),this.legendDom&&this.legendDom.parentNode&&(this.legendDom.parentNode.removeChild(this.legendDom),this.legendDom=null)}},{key:"setlegend",value:function(e,t){if(this.map){if(null==e||0==e.show)return void(this.legendDom&&(this.legendDom.style.display="none"));var n=e.data,i=this.map._inmapOption.toolDom.querySelector(".inmap-legend");if(i)this.legendDom=i;else{var r=document.createElement("div");r.classList.add("inmap-legend"),this.map._inmapOption.toolDom.appendChild(r),this.legendDom=r}var o="";e.title&&(o='<div class="inmap-legend-title">'+e.title+" </div>");var a=this.legend.formatter,s=this;o+='<table cellpadding="0" cellspacing="0">',t.forEach(function(t,i){var r=null,l=t.backgroundColor;r=a?a(s.toFixed(t.start),s.toFixed(t.end),i):n?n[i]:s.toFixed(t.start)+" ~ "+(null==t.end?'<span class="inmap-infinity"></span>':s.toFixed(t.end)),l?o+='\n                <tr>\n                    <td style="background:'+l+'; width:17px;"></td>\n                    <td class="inmap-legend-text">\n                       '+r+"\n                    </td>\n                </tr>\n                ":e.show=!1}),o+="</table>";var l=!1;l=!!e.show&&t.length>0,this.legendDom.style.display=l?"block":"none",this.legendDom.innerHTML=o}}},{key:"toFixed",value:function(e){return isNaN(e)?e:parseFloat(e).toFixed(this.legend.toFixed)}},{key:"getTarget",value:function(e,t){return{item:null,index:-1}}},{key:"refresh",value:function(){}},{key:"swopData",value:function(e,t){e>-1&&(this.workerData[e]=this.workerData[this.workerData.length-1],this.workerData[this.workerData.length-1]=t)}},{key:"tMouseleave",value:function(){this.tooltipDom&&(this.tooltipDom.style.display="none")}},{key:"tMousemove",value:function(e){if("onmoving"!=this.eventType&&(this.tooltip.show||!(0,s.isEmpty)(this.style.mouseOver))){var t=this.getTarget(e.pixel.x,e.pixel.y),n=t.item;n!=this.overItem&&(this.overItem=n,n&&this.swopData(t.index,t.item),this.eventType="mousemove",(0,s.isEmpty)(this.style.mouseOver)||this.refresh()),n?this.map.setDefaultCursor("pointer"):this.map.setDefaultCursor("default"),this.setTooltip(e)}}},{key:"tMouseClick",value:function(e){if("onmoving"!=this.eventType){var t=this.event.multiSelect,n=this.getTarget(e.pixel.x,e.pixel.y);if(-1!=n.index){var i=n.item;t?this.selectItemContains(i)?this.deleteSelectItem(i):this.selectItem.push(n.item):this.selectItem=[n.item],this.swopData(n.index,i),this.event.onMouseClick(this.selectItem,e),this.refresh(),c&&(this.overItem=i,this.setTooltip(e))}}}}]),t}(l.CanvasOverlay)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WhiteLover=[{featureType:"water",elementType:"all",stylers:{color:"#dbe0e7"}},{featureType:"land",elementType:"all",stylers:{color:"#f1f3f5"}},{featureType:"green",elementType:"all",stylers:{color:"#e9ecf2"}},{featureType:"manmade",elementType:"all",stylers:{color:"#dde1e8"}},{featureType:"building",elementType:"all",stylers:{color:"#dde1e8"}},{featureType:"boundary",elementType:"geometry",stylers:{color:"#d7dadf"}},{featureType:"railway",elementType:"geometry",stylers:{hue:"#3d85c6",lightness:63,saturation:21,visibility:"on"}},{featureType:"local",elementType:"all",stylers:{color:"#e7ebf2",visibility:"off"}},{featureType:"local",elementType:"geometry.stroke",stylers:{color:"#b5bfc7",visibility:"off"}},{featureType:"subway",elementType:"all",stylers:{color:"#73b1df"}},{featureType:"poi",elementType:"all",stylers:{color:"#b5bfc7",visibility:"off"}},{featureType:"subway",elementType:"all",stylers:{color:"#d9e3ea",visibility:"off"}},{featureType:"highway",elementType:"labels",stylers:{color:"#c6d4df",visibility:"off"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#c1c9d5"}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#d3d8e1",visibility:"on"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"on"}},{featureType:"administrative",elementType:"labels",stylers:{visibility:"off"}},{featureType:"background",elementType:"labels",stylers:{visibility:"off"}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#e9ecf2"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#d9dce3"}},{featureType:"arterial",elementType:"labels.text.fill",stylers:{visibility:"off"}}],t.Blueness=[{featureType:"water",elementType:"all",stylers:{color:"#566382"}},{featureType:"land",elementType:"all",stylers:{color:"#172137"}},{featureType:"green",elementType:"all",stylers:{color:"#282f57"}},{featureType:"manmade",elementType:"all",stylers:{color:"#3f4b8c"}},{featureType:"building",elementType:"all",stylers:{color:"#3f4b8c"}},{featureType:"boundary",elementType:"geometry",stylers:{color:"#4f6b9e"}},{featureType:"railway",elementType:"geometry",stylers:{color:"#4f6b9e"}},{featureType:"highway",elementType:"geometry.stroke",stylers:{color:"#202749",visibility:"off"}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#4f6b9e",visibility:"off"}},{featureType:"local",elementType:"geometry.fill",stylers:{color:"#303a6d"}},{featureType:"local",elementType:"geometry.stroke",stylers:{color:"#2d3667",visibility:"off"}},{featureType:"subway",elementType:"all",stylers:{color:"#445195",visibility:"off"}},{featureType:"all",elementType:"labels.text.stroke",stylers:{color:"#141831"}},{featureType:"all",elementType:"labels.text.fill",stylers:{color:"#5564b2"}},{featureType:"poi",elementType:"all",stylers:{color:"#141831",visibility:"off"}},{featureType:"subway",elementType:"all",stylers:{visibility:"off"}},{featureType:"arterial",elementType:"geometry.stroke",stylers:{color:"#181e3e"}},{featureType:"highway",elementType:"geometry",stylers:{color:"#324160",weight:"0.9"}},{featureType:"highway",elementType:"labels",stylers:{color:"#172137",visibility:"off"}},{featureType:"label",elementType:"labels",stylers:{visibility:"off"}},{featureType:"administrative",elementType:"geometry",stylers:{}}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.Label=function(){function e(t,n,r,o,a,s){i(this,e),this.center={x:t,y:n},this.virtualReact={maxX:0,maxY:0,minX:0,minY:0,width:0,height:0},this.show=!0,this.text=s,this.textReact={width:0,height:0},this.radius=r+2,this.padding=0,this.aIndex=0,this._getRectangle(1.1*o,a-.6)}return r(e,[{key:"getCurrentRect",value:function(){var e=null;switch(this.aIndex.toString()){case"0":e=this._getRightAnchor();break;case"1":e=this._getBottomAnchor();break;case"2":e=this._getLeftAnchor();break;case"3":e=this._getTopAnchor();break;default:e=this._getCenterRectange()}return e}},{key:"next",value:function(){return this.aIndex++,this.aIndex>3&&(this.show=!1),this.getCurrentRect()}},{key:"_getTrueLength",value:function(e){for(var t=e.length,n=0,i=0;i<t;i++)e.charCodeAt(i)>128?n+=2:n+=1;return n}},{key:"isAnchorMeet",value:function(e){var t=this.getCurrentRect(),n=e.getCurrentRect();return t.minX<n.maxX&&n.minX<t.maxX&&t.minY<n.maxY&&n.minY<t.maxY}},{key:"_getCenterRectange",value:function(){return{minX:this.center.x-this.radius,maxX:this.center.x+this.radius,minY:this.center.y-this.radius,maxY:this.center.y+this.radius}}},{key:"_getRectangle",value:function(e,t){var n=this._getTrueLength(this.text)*t;this.textReact={width:n+2*this.padding,height:e}}},{key:"_getLeftAnchor",value:function(){var e=this.center.x-this.radius-this.textReact.width,t=this.center.y-this.textReact.height/2,n=2*this.radius,i=n>this.textReact.height?n:this.textReact.height;return{x:e,y:t,minX:e,maxX:this.center.x+this.radius,minY:this.center.y-i/2,maxY:this.center.y+i/2}}},{key:"_getRightAnchor",value:function(){var e=this.center.x+this.radius,t=this.center.y-this.textReact.height/2,n=2*this.radius,i=n>this.textReact.height?n:this.textReact.height;return{x:e,y:t,minX:this.center.x-this.radius,maxX:this.center.x+this.radius+this.textReact.width,minY:this.center.y-i/2,maxY:this.center.y+i/2}}},{key:"_getTopAnchor",value:function(){var e=this.center.x-this.textReact.width/2,t=this.center.y-this.radius-this.textReact.height,n=2*this.radius,i=n>this.textReact.width?n:this.textReact.width;return{x:e,y:t,minX:this.center.x-i/2,maxX:this.center.x+i/2,minY:this.center.y-this.radius-this.textReact.height,maxY:this.center.y+this.radius}}},{key:"_getBottomAnchor",value:function(){var e=this.center.x-this.textReact.width/2,t=this.center.y+this.radius,n=this.radius>this.textReact.width?this.radius:this.textReact.width;return{x:e,y:t,minX:this.center.x-n/2,maxX:this.center.x+n/2,minY:this.center.y-this.radius,maxY:this.center.y+this.radius+this.textReact.height}}}]),e}()},function(e,t,n){"use strict";function i(e){return!!e&&"object"==typeof e}function r(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||o(e)}function o(e){return e.$$typeof===p}function a(e){return Array.isArray(e)?[]:{}}function s(e,t){return t&&!0===t.clone&&h(e)?c(a(e),e,t):e}function l(e,t,n){var i=e.slice();return t.forEach(function(t,r){void 0===i[r]?i[r]=s(t,n):h(t)?i[r]=c(e[r],t,n):-1===e.indexOf(t)&&i.push(s(t,n))}),i}function u(e,t,n){var i={};return h(e)&&Object.keys(e).forEach(function(t){i[t]=s(e[t],n)}),Object.keys(t).forEach(function(r){h(t[r])&&e[r]?i[r]=c(e[r],t[r],n):i[r]=s(t[r],n)}),i}function c(e,t,n){var i=Array.isArray(t),r=Array.isArray(e),o=n||{arrayMerge:l};if(i===r)return i?(o.arrayMerge||l)(e,t,n):u(e,t,n);return s(t,n)}var h=function(e){return i(e)&&!r(e)},f="function"==typeof Symbol&&Symbol.for,p=f?Symbol.for("react.element"):60103;c.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,n){return c(e,n,t)})};var d=c;e.exports=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o={},a=function(){function e(){i(this,e),this.worker=null,this.workerContent="!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"inMap\",[],e):\"object\"==typeof exports?exports.inMap=e():t.inMap=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=42)}([function(t,e,n){\"use strict\";function r(t){var e=Object.prototype.toString;return{\"[object Boolean]\":\"boolean\",\"[object Number]\":\"number\",\"[object String]\":\"string\",\"[object Function]\":\"function\",\"[object Array]\":\"array\",\"[object Date]\":\"date\",\"[object RegExp]\":\"regExp\",\"[object Undefined]\":\"undefined\",\"[object Null]\":\"null\",\"[object Object]\":\"object\"}[e.call(t)]}function o(t){return\"function\"==r(t)}function i(t){return\"string\"==r(t)}function a(t){return\"object\"==r(t)}function u(t){return\"array\"==r(t)}function c(t){var e=window.devicePixelRatio;t.canvas.width=t.canvas.width*e,t.canvas.height=t.canvas.height*e,t.canvas.style.width=t.canvas.width/e+\"px\",t.canvas.style.height=t.canvas.height/e+\"px\",t.scale(e,e)}function s(t){return String(t).replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/\'/g,\"&#39;\")}function f(t,e,n,r){for(var o=!1,i=90,a=-90,u=180,c=-180,s=0;s<e.length;s++)e[s]>a&&(a=e[s]),e[s]<i&&(i=e[s]),t[s]>c&&(c=t[s]),t[s]<u&&(u=t[s]);if(!(n<i||n>a||r<u||r>c))for(var f=0;f<e.length;f++){var l=(f+1)%e.length;e[f]<n!=e[l]<n&&r<(t[l]-t[f])*(n-e[f])/(e[l]-e[f])+t[f]&&(o=!o)}return o}function l(t,e,n){for(var r=[],o=[],i=0,a=n.length;i<a;i++)r.push(parseFloat(n[i][1])),o.push(parseFloat(n[i][0]));return f(r,o,t,e)}function h(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function p(){var t=Array.prototype.slice.call(arguments);return v.default.all(t,{arrayMerge:function(t,e){return e.length>0?e:t}})}Object.defineProperty(e,\"__esModule\",{value:!0}),e.chunk=e.extend=e.isPromiseLike=e.isEmpty=void 0;var d=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};e.typeOf=r,e.isFunction=o,e.isString=i,e.isObject=a,e.isArray=u,e.setDevicePixelRatio=c,e.encodeHTML=s,e.isPolyContains=f,e.isPolyContainsPt=l,e.detectmob=h,e.merge=p;var y=n(7),v=function(t){return t&&t.__esModule?t:{default:t}}(y);e.isEmpty=function(t){return null==t||!(Object.keys(t)||t).length},e.isPromiseLike=function(t){return null!==t&&(\"object\"===(void 0===t?\"undefined\":d(t))||\"function\"==typeof t)&&\"function\"==typeof t.then},e.extend=function(t,e){if(t&&e&&a(e)){for(var n in e)t[n]=e[n];for(var r,o=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"],i=0;i<o.length;i++)r=o[i],Object.prototype.constructor.call(e,r)&&(t[r]=e[r])}return t},e.chunk=function(t,e){return Array.from({length:Math.ceil(t.length/e)},function(n,r){return t.slice(r*e,r*e+e)})}},function(t,e,n){\"use strict\";(function(t){var n,r,o,i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};!function(a,u){\"object\"==i(e)&&\"object\"==i(t)?t.exports=u():(r=[],n=u,void 0!==(o=\"function\"==typeof n?n.apply(e,r):n)&&(t.exports=o))}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=47)}([function(t,e){var n=t.exports={version:\"2.5.1\"};\"number\"==typeof __e&&(__e=n)},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(10)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(9),o=n(34),i=n(27),a=Object.defineProperty;e.f=n(2)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(1),o=n(0),i=n(32),a=n(6),u=function t(e,n,u){var c,s,f,l=e&t.F,h=e&t.G,p=e&t.S,d=e&t.P,y=e&t.B,v=e&t.W,g=h?o:o[n]||(o[n]={}),x=g.prototype,b=h?r:p?r[n]:(r[n]||{}).prototype;h&&(u=n);for(c in u)(s=!l&&b&&void 0!==b[c])&&c in g||(f=s?b[c]:u[c],g[c]=h&&\"function\"!=typeof b[c]?u[c]:y&&s?i(f,r):v&&b[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):d&&\"function\"==typeof f?i(Function.call,f):f,d&&((g.virtual||(g.virtual={}))[c]=f,e&t.R&&x&&!x[c]&&a(x,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(4),o=n(12);t.exports=n(2)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(67),o=n(16);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(25)(\"wks\"),o=n(13),i=n(1).Symbol,a=\"function\"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)(\"Symbol.\"+t))}).store=r},function(t,e,n){var r=n(11);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return\"object\"==(void 0===t?\"undefined\":i(t))?null!==t:\"function\"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},function(t,e,n){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,n){e.__esModule=!0;var r=n(49),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can\'t call method on  \"+t);return t}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e,n){var r=n(9),o=n(72),i=n(17),a=n(24)(\"IE_PROTO\"),u=function(){},c=function(){var t,e=n(33)(\"iframe\"),r=i.length;for(e.style.display=\"none\",n(66).appendChild(e),e.src=\"javascript:\",t=e.contentWindow.document,t.open(),t.write(\"<script>document.F=Object<\/script>\"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[a]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(40),o=n(17);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(4).f,o=n(3),i=n(8)(\"toStringTag\");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(25)(\"keys\"),o=n(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(1),o=r[\"__core-js_shared__\"]||(r[\"__core-js_shared__\"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(11);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if(\"function\"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError(\"Can\'t convert object to primitive value\")}},function(t,e,n){var r=n(1),o=n(0),i=n(19),a=n(29),u=n(4).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(8)},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(53),a=r(o),u=n(52),c=r(u),s=\"function\"==typeof c.default&&\"symbol\"==i(a.default)?function(t){return void 0===t?\"undefined\":i(t)}:function(t){return t&&\"function\"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?\"symbol\":void 0===t?\"undefined\":i(t)};e.default=\"function\"==typeof c.default&&\"symbol\"===s(a.default)?function(t){return void 0===t?\"undefined\":s(t)}:function(t){return t&&\"function\"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?\"symbol\":void 0===t?\"undefined\":s(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(62);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(11),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){t.exports=!n(2)&&!n(10)(function(){return 7!=Object.defineProperty(n(33)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(19),o=n(5),i=n(41),a=n(6),u=n(3),c=n(18),s=n(69),f=n(23),l=n(39),h=n(8)(\"iterator\"),p=!([].keys&&\"next\"in[].keys()),d=function(){return this};t.exports=function(t,e,n,y,v,g,x){s(n,e,y);var b,m,_,O=function(t){if(!p&&t in j)return j[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+\" Iterator\",P=\"values\"==v,M=!1,j=t.prototype,L=j[h]||j[\"@@iterator\"]||v&&j[v],S=L||O(v),k=v?P?O(\"entries\"):S:void 0,T=\"Array\"==e?j.entries||L:L;if(T&&(_=l(T.call(new t)))!==Object.prototype&&_.next&&(f(_,w,!0),r||u(_,h)||a(_,h,d)),P&&L&&\"values\"!==L.name&&(M=!0,S=function(){return L.call(this)}),r&&!x||!p&&!M&&j[h]||a(j,h,S),c[e]=S,c[w]=d,v)if(b={values:P?S:O(\"values\"),keys:g?S:O(\"keys\"),entries:k},x)for(m in b)m in j||i(j,m,b[m]);else o(o.P+o.F*(p||M),e,b);return b}},function(t,e,n){var r=n(22),o=n(12),i=n(7),a=n(27),u=n(3),c=n(34),s=Object.getOwnPropertyDescriptor;e.f=n(2)?s:function(t,e){if(t=i(t),e=a(e,!0),c)try{return s(t,e)}catch(t){}if(u(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(40),o=n(17).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(3),o=n(42),i=n(24)(\"IE_PROTO\"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(3),o=n(7),i=n(64)(!1),a=n(24)(\"IE_PROTO\");t.exports=function(t,e){var n,u=o(t),c=0,s=[];for(n in u)n!=a&&r(u,n)&&s.push(n);for(;e.length>c;)r(u,n=e[c++])&&(~i(s,n)||s.push(n));return s}},function(t,e,n){t.exports=n(6)},function(t,e,n){var r=n(16);t.exports=function(t){return Object(r(t))}},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.MercatorProjection=void 0;var o=n(50),i=r(o),a=n(14),u=r(a),c=n(15),s=r(c),f=n(55),l=r(f),h=n(54),p=r(h),d=n(46),y=n(45),v=n(44);e.MercatorProjection=function(t){function e(){(0,u.default)(this,e);var t=(0,l.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return t.EARTHRADIUS=6370996.81,t.MCBAND=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],t.LLBAND=[75,60,45,30,15,0],t.MC2LL=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],t.LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],t}return(0,p.default)(e,t),(0,s.default)(e,[{key:\"getDistanceByMC\",value:function(t,e){if(!t||!e)return 0;var n,r,o,i;return(t=this.convertMC2LL(t))?(n=this.toRadians(t.lng),r=this.toRadians(t.lat),(e=this.convertMC2LL(e))?(o=this.toRadians(e.lng),i=this.toRadians(e.lat),this.getDistance(n,o,r,i)):0):0}},{key:\"getDistanceByLL\",value:function(t,e){if(!t||!e)return 0;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);var n,r,o,i;return n=this.toRadians(t.lng),o=this.toRadians(t.lat),r=this.toRadians(e.lng),i=this.toRadians(e.lat),this.getDistance(n,r,o,i)}},{key:\"convertMC2LL\",value:function(t){var e,n;e=new y.Point(Math.abs(t.lng),Math.abs(t.lat));for(var r=0;r<this.MCBAND.length;r++)if(e.lat>=this.MCBAND[r]){n=this.MC2LL[r];break}var o=this.convertor(t,n);return new y.Point(o.lng.toFixed(6),o.lat.toFixed(6))}},{key:\"convertLL2MC\",value:function(t){var e,n;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),e=new y.Point(t.lng,t.lat);for(var r=0;r<this.LLBAND.length;r++)if(e.lat>=this.LLBAND[r]){n=this.LL2MC[r];break}if(!n)for(var o=this.LLBAND.length-1;o>=0;o--)if(e.lat<=-this.LLBAND[o]){n=this.LL2MC[o];break}var i=this.convertor(t,n);return new y.Point(i.lng.toFixed(2),i.lat.toFixed(2))}},{key:\"convertor\",value:function(t,e){if(t&&e){var n=e[0]+e[1]*Math.abs(t.lng),r=Math.abs(t.lat)/e[9],o=e[2]+e[3]*r+e[4]*r*r+e[5]*r*r*r+e[6]*r*r*r*r+e[7]*r*r*r*r*r+e[8]*r*r*r*r*r*r;return n*=t.lng<0?-1:1,o*=t.lat<0?-1:1,new y.Point(n,o)}}},{key:\"getDistance\",value:function(t,e,n,r){return this.EARTHRADIUS*Math.acos(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(e-t))}},{key:\"toRadians\",value:function(t){return Math.PI*t/180}},{key:\"toDegrees\",value:function(t){return 180*t/Math.PI}},{key:\"getRange\",value:function(t,e,n){return null!=e&&(t=Math.max(t,e)),null!=n&&(t=Math.min(t,n)),t}},{key:\"getLoop\",value:function(t,e,n){for(;t>n;)t-=n-e;for(;t<e;)t+=n-e;return t}},{key:\"lngLatToMercator\",value:function(t){return this.convertLL2MC(t)}},{key:\"lngLatToPoint\",value:function(t){var e=this.convertLL2MC(t);return new v.Pixel(e.lng,e.lat)}},{key:\"mercatorToLngLat\",value:function(t){return this.convertMC2LL(t)}},{key:\"pointToLngLat\",value:function(t){var e=new y.Point(t.x,t.y);return this.convertMC2LL(e)}},{key:\"pointToPixel\",value:function(t,e,n,r,o){if(t){t=this.lngLatToMercator(t,o),n=this.lngLatToMercator(n);var i=this.getZoomUnits(e),a=Math.round((t.lng-n.lng)/i+r.width/2),u=Math.round((n.lat-t.lat)/i+r.height/2);return new v.Pixel(a,u)}}},{key:\"pixelToPoint\",value:function(t,e,n,r,o){if(t){var i=this.getZoomUnits(e),a=n.lng+i*(t.x-r.width/2),u=n.lat-i*(t.y-r.height/2),c=new y.Point(a,u);return this.mercatorToLngLat(c,o)}}},{key:\"getZoomUnits\",value:function(t){return Math.pow(2,18-t)}}]),e}(d.Projection)},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Pixel=void 0;var o=n(14),i=r(o),a=n(15),u=r(a);e.Pixel=function(){function t(e,n){(0,i.default)(this,t),this.x=e||0,this.y=n||0}return(0,u.default)(t,[{key:\"Pixel\",value:function(t){return t&&t.x==this.x&&t.y==this.y}}]),t}()},function(t,e,n){function r(t){return\"string\"==typeof t}function o(t,e){isNaN(t)&&(t=isNaN(t)?0:t),r(t)&&(t=parseFloat(t)),isNaN(e)&&(e=isNaN(e)?0:e),r(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}Object.defineProperty(e,\"__esModule\",{value:!0}),e.isString=r,e.Point=o,o.isInRange=function(t){return t&&t.lng<=180&&t.lng>=-180&&t.lat<=74&&t.lat>=-74},o.prototype.equals=function(t){return t&&this.lat==t.lat&&this.lng==t.lng},e.default=o},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Projection=void 0;var o=n(14),i=r(o),a=n(15),u=r(a);e.Projection=function(){function t(){(0,i.default)(this,t)}return(0,u.default)(t,[{key:\"lngLatToPoint\",value:function(){throw\"lngLatToPoint方法未实现\"}},{key:\"pointToLngLat\",value:function(){throw\"pointToLngLat方法未实现\"}}]),t}()},function(t,e,n){function r(t){return\"[object Array]\"==Object.prototype.toString.call(t)}function o(t,e){var n=e.getZoom(),r=e.getCenter(),o=e.getSize();return s.pointToPixel(t,n,r,o)}function i(t,e){var n=t;t=r(n)?n:n.request.data,e=e||n.request.map;for(var i=[],a=0,u=t.length;a<u;a++)i.push(o(t[a],e));return i}function a(t,e){var n=e.zoom,r=e.center,o=e.size;return s.pointToPixel(t,n,r,o)}function u(t,e){var n=t;t=r(n)?n:n.request.data,e=e||n.request.map;for(var o=[],i=0,u=t.length;i<u;i++)o.push(a(t[i],e));return o}Object.defineProperty(e,\"__esModule\",{value:!0}),e.geo=void 0,e.pointToPixel=o,e.pointsToPixels=i,e.pointToPixelWorker=a,e.pointsToPixelsWoker=u;var c=n(43),s=e.geo={pointToPixel:function(t,e,n,r){return this.projection.pointToPixel(t,e,n,r)},lngLatToMercator:function(t){return this.projection.convertLL2MC(t)},projection:new c.MercatorProjection}},function(t,e,n){t.exports={default:n(56),__esModule:!0}},function(t,e,n){t.exports={default:n(57),__esModule:!0}},function(t,e,n){t.exports={default:n(58),__esModule:!0}},function(t,e,n){t.exports={default:n(59),__esModule:!0}},function(t,e,n){t.exports={default:n(60),__esModule:!0}},function(t,e,n){t.exports={default:n(61),__esModule:!0}},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(51),i=r(o),a=n(48),u=r(a),c=n(30),s=r(c);e.default=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===e?\"undefined\":(0,s.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,n){e.__esModule=!0;var r=n(30),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError(\"this hasn\'t been initialised - super() hasn\'t been called\");return!e||\"object\"!==(void 0===e?\"undefined\":(0,o.default)(e))&&\"function\"!=typeof e?t:e}},function(t,e,n){n(80);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){n(81);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){n(82),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){n(83),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){n(86),n(84),n(87),n(88),t.exports=n(0).Symbol},function(t,e,n){n(85),n(89),t.exports=n(29).f(\"iterator\")},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(7),o=n(78),i=n(77);t.exports=function(t){return function(e,n,a){var u,c=r(e),s=o(c.length),f=i(a,s);if(t&&n!=n){for(;s>f;)if((u=c[f++])!=u)return!0}else for(;s>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(21),o=n(38),i=n(22);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var a,u=n(t),c=i.f,s=0;u.length>s;)c.call(t,a=u[s++])&&e.push(a);return e}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(31);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},function(t,e,n){var r=n(31);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},function(t,e,n){var r=n(20),o=n(12),i=n(23),a={};n(6)(a,n(8)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+\" Iterator\")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(13)(\"meta\"),o=n(11),a=n(3),u=n(4).f,c=0,s=Object.isExtensible||function(){return!0},f=!n(10)(function(){return s(Object.preventExtensions({}))}),l=function(t){u(t,r,{value:{i:\"O\"+ ++c,w:{}}})},h=function(t,e){if(!o(t))return\"symbol\"==(void 0===t?\"undefined\":i(t))?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!a(t,r)){if(!s(t))return\"F\";if(!e)return\"E\";l(t)}return t[r].i},p=function(t,e){if(!a(t,r)){if(!s(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return f&&y.NEED&&s(t)&&!a(t,r)&&l(t),t},y=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:p,onFreeze:d}},function(t,e,n){var r=n(4),o=n(9),i=n(21);t.exports=n(2)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),u=a.length,c=0;u>c;)r.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var r=n(7),o=n(37).f,a={}.toString,u=\"object\"==(\"undefined\"==typeof window?\"undefined\":i(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&\"[object Window]\"==a.call(t)?c(t):o(r(t))}},function(t,e,n){var r=n(5),o=n(0),i=n(10);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",a)}},function(t,e,n){var r=n(11),o=n(9),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+\": can\'t set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,r){try{r=n(32)(Function.call,n(36).f(Object.prototype,\"__proto__\").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var r=n(26),o=n(16);t.exports=function(t){return function(e,n){var i,a,u=String(o(e)),c=r(n),s=u.length;return c<0||c>=s?t?\"\":void 0:(i=u.charCodeAt(c),i<55296||i>56319||c+1===s||(a=u.charCodeAt(c+1))<56320||a>57343?t?u.charAt(c):i:t?u.slice(c,c+2):a-56320+(i-55296<<10)+65536)}}},function(t,e,n){var r=n(26),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(26),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(63),o=n(70),i=n(18),a=n(7);t.exports=n(35)(Array,\"Array\",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):\"keys\"==e?o(0,n):\"values\"==e?o(0,t[n]):o(0,[n,t[n]])},\"values\"),i.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(t,e,n){var r=n(5);r(r.S,\"Object\",{create:n(20)})},function(t,e,n){var r=n(5);r(r.S+r.F*!n(2),\"Object\",{defineProperty:n(4).f})},function(t,e,n){var r=n(42),o=n(39);n(74)(\"getPrototypeOf\",function(){return function(t){return o(r(t))}})},function(t,e,n){var r=n(5);r(r.S,\"Object\",{setPrototypeOf:n(75).set})},function(t,e){},function(t,e,n){var r=n(76)(!0);n(35)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(1),o=n(3),a=n(2),u=n(5),c=n(41),s=n(71).KEY,f=n(10),l=n(25),h=n(23),p=n(13),d=n(8),y=n(29),v=n(28),g=n(65),x=n(68),b=n(9),m=n(7),_=n(27),O=n(12),w=n(20),P=n(73),M=n(36),j=n(4),L=n(21),S=M.f,k=j.f,T=P.f,R=r.Symbol,A=r.JSON,C=A&&A.stringify,E=d(\"_hidden\"),N=d(\"toPrimitive\"),I={}.propertyIsEnumerable,q=l(\"symbol-registry\"),F=l(\"symbols\"),D=l(\"op-symbols\"),B=Object.prototype,G=\"function\"==typeof R,H=r.QObject,Y=!H||!H.prototype||!H.prototype.findChild,X=a&&f(function(){return 7!=w(k({},\"a\",{get:function(){return k(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=S(B,e);r&&delete B[e],k(t,e,n),r&&t!==B&&k(B,e,r)}:k,z=function(t){var e=F[t]=w(R.prototype);return e._k=t,e},W=G&&\"symbol\"==i(R.iterator)?function(t){return\"symbol\"==(void 0===t?\"undefined\":i(t))}:function(t){return t instanceof R},U=function t(e,n,r){return e===B&&t(D,n,r),b(e),n=_(n,!0),b(r),o(F,n)?(r.enumerable?(o(e,E)&&e[E][n]&&(e[E][n]=!1),r=w(r,{enumerable:O(0,!1)})):(o(e,E)||k(e,E,O(1,{})),e[E][n]=!0),X(e,n,r)):k(e,n,r)},V=function(t,e){b(t);for(var n,r=g(e=m(e)),o=0,i=r.length;i>o;)U(t,n=r[o++],e[n]);return t},J=function(t,e){return void 0===e?w(t):V(w(t),e)},Z=function(t){var e=I.call(this,t=_(t,!0));return!(this===B&&o(F,t)&&!o(D,t))&&(!(e||!o(this,t)||!o(F,t)||o(this,E)&&this[E][t])||e)},K=function(t,e){if(t=m(t),e=_(e,!0),t!==B||!o(F,e)||o(D,e)){var n=S(t,e);return!n||!o(F,e)||o(t,E)&&t[E][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=T(m(t)),r=[],i=0;n.length>i;)o(F,e=n[i++])||e==E||e==s||r.push(e);return r},$=function(t){for(var e,n=t===B,r=T(n?D:m(t)),i=[],a=0;r.length>a;)!o(F,e=r[a++])||n&&!o(B,e)||i.push(F[e]);return i};G||(R=function(){if(this instanceof R)throw TypeError(\"Symbol is not a constructor!\");var t=p(arguments.length>0?arguments[0]:void 0),e=function e(n){this===B&&e.call(D,n),o(this,E)&&o(this[E],t)&&(this[E][t]=!1),X(this,t,O(1,n))};return a&&Y&&X(B,t,{configurable:!0,set:e}),z(t)},c(R.prototype,\"toString\",function(){return this._k}),M.f=K,j.f=U,n(37).f=P.f=Q,n(22).f=Z,n(38).f=$,a&&!n(19)&&c(B,\"propertyIsEnumerable\",Z,!0),y.f=function(t){return z(d(t))}),u(u.G+u.W+u.F*!G,{Symbol:R});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)d(tt[et++]);for(var nt=L(d.store),rt=0;nt.length>rt;)v(nt[rt++]);u(u.S+u.F*!G,\"Symbol\",{for:function(t){return o(q,t+=\"\")?q[t]:q[t]=R(t)},keyFor:function(t){if(!W(t))throw TypeError(t+\" is not a symbol!\");for(var e in q)if(q[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),u(u.S+u.F*!G,\"Object\",{create:J,defineProperty:U,defineProperties:V,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),A&&u(u.S+u.F*(!G||f(function(){var t=R();return\"[null]\"!=C([t])||\"{}\"!=C({a:t})||\"{}\"!=C(Object(t))})),\"JSON\",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return e=r[1],\"function\"==typeof e&&(n=e),!n&&x(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,C.apply(A,r)}}}),R.prototype[N]||n(6)(R.prototype,N,R.prototype.valueOf),h(R,\"Symbol\"),h(Math,\"Math\",!0),h(r.JSON,\"JSON\",!0)},function(t,e,n){n(28)(\"asyncIterator\")},function(t,e,n){n(28)(\"observable\")},function(t,e,n){n(79);for(var r=n(1),o=n(6),i=n(18),a=n(8)(\"toStringTag\"),u=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),c=0;c<u.length;c++){var s=u[c],f=r[s],l=f&&f.prototype;l&&!l[a]&&o(l,a,s),i[s]=i.Array}}])})}).call(e,n(47)(t))},,,function(t,e,n){\"use strict\";function r(t,e){isNaN(t)&&(t=isNaN(t)?0:t),(0,o.isString)(t)&&(t=parseFloat(t)),isNaN(e)&&(e=isNaN(e)?0:e),(0,o.isString)(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Point=r;var o=n(0);r.isInRange=function(t){return t&&t.lng<=180&&t.lng>=-180&&t.lat<=74&&t.lat>=-74},r.prototype.equals=function(t){return t&&this.lat==t.lat&&this.lng==t.lng},e.default=r},,function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Label=function(){function t(e,n,o,i,a,u){r(this,t),this.center={x:e,y:n},this.virtualReact={maxX:0,maxY:0,minX:0,minY:0,width:0,height:0},this.show=!0,this.text=u,this.textReact={width:0,height:0},this.radius=o+2,this.padding=0,this.aIndex=0,this._getRectangle(1.1*i,a-.6)}return o(t,[{key:\"getCurrentRect\",value:function(){var t=null;switch(this.aIndex.toString()){case\"0\":t=this._getRightAnchor();break;case\"1\":t=this._getBottomAnchor();break;case\"2\":t=this._getLeftAnchor();break;case\"3\":t=this._getTopAnchor();break;default:t=this._getCenterRectange()}return t}},{key:\"next\",value:function(){return this.aIndex++,this.aIndex>3&&(this.show=!1),this.getCurrentRect()}},{key:\"_getTrueLength\",value:function(t){for(var e=t.length,n=0,r=0;r<e;r++)t.charCodeAt(r)>128?n+=2:n+=1;return n}},{key:\"isAnchorMeet\",value:function(t){var e=this.getCurrentRect(),n=t.getCurrentRect();return e.minX<n.maxX&&n.minX<e.maxX&&e.minY<n.maxY&&n.minY<e.maxY}},{key:\"_getCenterRectange\",value:function(){return{minX:this.center.x-this.radius,maxX:this.center.x+this.radius,minY:this.center.y-this.radius,maxY:this.center.y+this.radius}}},{key:\"_getRectangle\",value:function(t,e){var n=this._getTrueLength(this.text)*e;this.textReact={width:n+2*this.padding,height:t}}},{key:\"_getLeftAnchor\",value:function(){var t=this.center.x-this.radius-this.textReact.width,e=this.center.y-this.textReact.height/2,n=2*this.radius,r=n>this.textReact.height?n:this.textReact.height;return{x:t,y:e,minX:t,maxX:this.center.x+this.radius,minY:this.center.y-r/2,maxY:this.center.y+r/2}}},{key:\"_getRightAnchor\",value:function(){var t=this.center.x+this.radius,e=this.center.y-this.textReact.height/2,n=2*this.radius,r=n>this.textReact.height?n:this.textReact.height;return{x:t,y:e,minX:this.center.x-this.radius,maxX:this.center.x+this.radius+this.textReact.width,minY:this.center.y-r/2,maxY:this.center.y+r/2}}},{key:\"_getTopAnchor\",value:function(){var t=this.center.x-this.textReact.width/2,e=this.center.y-this.radius-this.textReact.height,n=2*this.radius,r=n>this.textReact.width?n:this.textReact.width;return{x:t,y:e,minX:this.center.x-r/2,maxX:this.center.x+r/2,minY:this.center.y-this.radius-this.textReact.height,maxY:this.center.y+this.radius}}},{key:\"_getBottomAnchor\",value:function(){var t=this.center.x-this.textReact.width/2,e=this.center.y+this.radius,n=this.radius>this.textReact.width?this.radius:this.textReact.width;return{x:t,y:e,minX:this.center.x-n/2,maxX:this.center.x+n/2,minY:this.center.y-this.radius,maxY:this.center.y+this.radius+this.textReact.height}}}]),t}()},function(t,e,n){\"use strict\";function r(t){return!!t&&\"object\"==typeof t}function o(t){var e=Object.prototype.toString.call(t);return\"[object RegExp]\"===e||\"[object Date]\"===e||i(t)}function i(t){return t.$typeof===p}function a(t){return Array.isArray(t)?[]:{}}function u(t,e){return e&&!0===e.clone&&l(t)?f(a(t),t,e):t}function c(t,e,n){var r=t.slice();return e.forEach(function(e,o){void 0===r[o]?r[o]=u(e,n):l(e)?r[o]=f(t[o],e,n):-1===t.indexOf(e)&&r.push(u(e,n))}),r}function s(t,e,n){var r={};return l(t)&&Object.keys(t).forEach(function(e){r[e]=u(t[e],n)}),Object.keys(e).forEach(function(o){l(e[o])&&t[o]?r[o]=f(t[o],e[o],n):r[o]=u(e[o],n)}),r}function f(t,e,n){var r=Array.isArray(e),o=Array.isArray(t),i=n||{arrayMerge:c};if(r===o)return r?(i.arrayMerge||c)(t,e,n):s(t,e,n);return u(e,n)}var l=function(t){return r(t)&&!o(t)},h=\"function\"==typeof Symbol&&Symbol.for,p=h?Symbol.for(\"react.element\"):60103;f.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error(\"first argument should be an array with at least two elements\");return t.reduce(function(t,n){return f(t,n,e)})};var d=f;t.exports=d},,,function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){r(this,t),this.x=e||0,this.y=n||0}return o(t,[{key:\"Pixel\",value:function(t){return t&&t.x==this.x&&t.y==this.y}}]),t}();e.default=i},,,,,,,,,,,function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.BoundaryOverlay=void 0;var r=n(0),o=n(1),i=n(4),a=n(28),u=function(t){return t&&t.__esModule?t:{default:t}}(a);e.BoundaryOverlay={calculatePixel:function(t){for(var e=t,n=(0,r.isArray)(e)?e:e.request.data,a=e.request.map,c=0;c<n.length;c++)if(n[c].geo){for(var s=[],f=0;f<n[c].geo.length;f++){var l=(0,o.pointToPixelWorker)(new i.Point(n[c].geo[f][0],n[c].geo[f][1]),a);s.push([l.x,l.y,parseFloat(n[c].geo[f][2])])}n[c].pgeo=s;var h=(0,u.default)([s]);null==h&&console.error(n[c].name+\"围栏数据有问题！\"),n[c].bestCell=h}return{data:n,client:t}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=e.CircuitOverlay={transferCoordinate:function(t,e,n){return t.map(function(t){return[(t[0]-e.x)/n,(e.y-t[1])/n]})},calculatePixel:function(t){for(var e=t,n=e.request.data.points,o=e.request.data.zoomUnit,i=e.request.data.nwMc,a=0;a<n.length;a++){var u=n[a];u.pixels=r.transferCoordinate(u._coordinates,i,o)}return{data:n,client:t}}}},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.GriddingOverlay=void 0;var o=n(1),i=n(10),a=r(i),u=n(4),c=r(u),s=e.GriddingOverlay={toRecGrids:function(t){var e=t.request.data,n=e.points,r=e.zoomUnit,o=e.size,i=e.mapSize,a=e.mapCenter,u=e.nwMc,c=e.map,f=e.zoom,l=e.type;return s._calculatePixel(c,n,i,a,f),{data:s.recGrids(n,c,u,o,r,i,l),client:t}},_calculatePixel:function(t,e,n,r,i){for(var u=Math.pow(2,18-i),s=o.geo.projection.lngLatToPoint(r),f=new a.default(s.x-n.width/2*u,s.y+n.height/2*u),l=0;l<e.length;l++){if(e[l].lng&&e[l].lat&&!e[l].x&&!e[l].y){var h=o.geo.projection.lngLatToPoint(new c.default(e[l].lng,e[l].lat),t);e[l].x=h.x,e[l].y=h.y}e[l].x&&e[l].y&&(e[l].px=(e[l].x-f.x)/u,e[l].py=(f.y-e[l].y)/u)}return e},recGrids:function(t,e,n,r,o,i,a){var u={},c=r/o,f=parseInt(n.x/r,10)*r,l=(f-n.x)/o,h=i.width,p=parseInt(n.y/r,10)*r+r,d=(n.y-p)/o,y=i.height;if(t.length>0){for(var v=t[0],g=v.px,x=v.py,b=v.px,m=v.py,_=0;_<t.length-1;_++){var O=t[_];g>O.px&&(g=O.px),x>O.py&&(x=O.py),b<O.px&&(b=O.px),m<O.py&&(m=O.py)}l=g-2,d=x-2,h=b+2,y=m+2}for(var w=[],P=0;l+P*c<h;){var M=l+P*c;w.push(M.toFixed(2)),P++}for(var j=[],L=0;d+L*c<y;){var S=d+L*c;j.push(S.toFixed(2)),L++}for(var k=0;k<w.length;k++)for(var T=0;T<j.length;T++){var R=w[k]+\"_\"+j[T];u[R]=[]}for(var A=0;A<t.length;A++)for(var C=t[A].px,E=t[A].py,N=t[A].count,I=0;I<w.length;I++){var q=Number(w[I]);if(C>=q&&C<q+c)for(var F=0;F<j.length;F++){var D=Number(j[F]);E>=D&&E<D+c&&u[w[I]+\"_\"+j[F]].push(N)}}return u=\"svg\"===a?s.valueToAvg(u):s.valueToSum(u),{grids:u}},valueToAvg:function(t){for(var e in t){var n=t[e],r=0;if(n.length>0){for(var o=0;o<n.length;o++)r+=n[o];t[e]=r/n.length}else t[e]=0}return t},valueToSum:function(t){for(var e in t){var n=t[e],r=0;if(n.length>0){for(var o=0;o<n.length;o++)r+=n[o];t[e]=r}else t[e]=0}return t}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.HeatTileOverlay=e.HeatOverlay=void 0;var r=n(1);e.HeatOverlay={pointsToPixels:function(t){return t.request.data.forEach(function(e){e.pixel=(0,r.pointToPixelWorker)(e,t.request.map)}),{data:t.request.data,client:t}}},e.HeatTileOverlay={pointsToPixels:function(t){return t.request.data.forEach(function(e){e.pixelData=(0,r.pointsToPixelsWoker)(e.data,t.request.map)}),{data:t.request.data,client:t}}}},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.HoneycombOverlay=void 0;var o=n(1),i=n(10),a=r(i),u=n(4),c=r(u),s=e.HoneycombOverlay={toRecGrids:function(t){var e=t,n=e.request.data.points,r=e.request.data.zoomUnit,o=e.request.data.size,i=e.request.data.mapSize,a=e.request.data.mapCenter,u=e.request.data.nwMc,c=e.request.map,f=e.request.data.zoom;return s._calculatePixel(c,n,i,a,f),{data:s.honeycombGrid(n,c,u,o,r,i),client:t}},_calculatePixel:function(t,e,n,r,i){for(var u=Math.pow(2,18-i),s=o.geo.projection.lngLatToPoint(r),f=new a.default(s.x-n.width/2*u,s.y+n.height/2*u),l=0;l<e.length;l++){if(e[l].lng&&e[l].lat&&!e[l].x&&!e[l].y){var h=o.geo.projection.lngLatToPoint(new c.default(e[l].lng,e[l].lat),t);e[l].x=h.x,e[l].y=h.y}e[l].x&&e[l].y&&(e[l].px=(e[l].x-f.x)/u,e[l].py=(f.y-e[l].y)/u)}return e},honeycombGrid:function(t,e,n,r,o,i){var a=0,u=0,c={},s=r/o,f=s,l=3*s/4,h=2*r*3/4,p=parseInt(n.y/h+1,10)*h,d=(n.y-p)/o;d=parseInt(d,10);var y=parseInt(n.x/r,10)*r,v=(y-n.x)/o;v=parseInt(v,10);var g=parseInt(i.width+f,10),x=parseInt(i.height+l,10);if(t.length>0){for(var b=t[0],m=b.px,_=b.py,O=b.px,w=b.py,P=0;P<t.length-1;P++){var M=t[P];m>M.px&&(m=M.px),_>M.py&&(_=M.py),O<M.px&&(O=M.px),w<M.py&&(w=M.py)}v=parseInt(m-11,10),d=parseInt(_-11,10),g=parseInt(O+11,10),x=parseInt(w+11,10)}for(var j=v,L=d,S=!1;L<x;){for(;j<g;){var k=S?j-f/2:j;k=parseInt(k,10),c[k+\"|\"+L]=c[k+\"|\"+L]||{x:k,y:L,len:0},j+=f}S=!S,j=v,L+=l}for(var T in t){var R=t[T].count,A=t[T].px,C=t[T].py,E=Math.round((C-d)/l),N=E*l+d,I=Math.round((A-v)/f),q=I*f+v;if(E%2&&(q-=f/2),!(q<v||q>g||N<d||N>x)&&c[q+\"|\"+N]){c[q+\"|\"+N].len+=R;var F=c[q+\"|\"+N].len;a=a||F,u=u||F,a=Math.max(a,F),u=Math.min(u,F)}}return{grids:c,max:a,min:u}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.LablEvading=void 0;var r=n(6);e.LablEvading={merge:function(t){var e=t.request.data,n=e.pixels,o=e.height,i=e.borderWidth,a=e.byteWidth,u=n.map(function(t){var e=t.pixel.radius+i;return new r.Label(t.pixel.x,t.pixel.y,e,o,a,t.name)});u.sort(function(t,e){return e.x-t.x});var c=void 0;do{c=!1;for(var s=0;s<u.length;s++)for(var f=u[s],l=0;l<u.length;l++)if(s!=l&&f.show&&f.isAnchorMeet(u[l])){f.next(),c=!0;break}}while(c);var h=[];return u.forEach(function(t){if(t.show){var e=t.getCurrentRect();h.push({text:t.text,x:e.x,y:e.y})}}),{data:h,client:t}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.PolymeOverlay=void 0;var r=n(1),o=e.PolymeOverlay={mergeCount:0,isMeet:function(t,e){var n=t.x-e.x,r=t.y-e.y;return!(n*n+r*r>(t.radius+e.radius)*(t.radius+e.radius))},getDots:function(t,e,n){var r=t.pixel,i=e.pixel,a=t.merges,u=e.merges,c=(a||[t]).concat(u||[e]);return{merges:c,pixel:{radius:n+o.mergeCount*c.length,x:Math.ceil((r.x+i.x)/2),y:Math.ceil((r.y+i.y)/2)}}},merge:function(t,e){var n=void 0,r=void 0;do{n=[],r=!1;for(var i=0;i<t.length;i++){for(var a=t[i],u=0;u<t.length;u++)i!=u&&o.isMeet(a.pixel,t[u].pixel)&&(a=o.getDots(a,t[u],e),t.splice(i,1),t.splice(u-1,1),r=!0);n.push(a)}t.length>0&&n.push(t[0]),t=n}while(r);return n},mergePoint:function(t){o.mergeCount=t.request.data.mergeCount;var e=t.request.data.points,n=t.request.data.size;return e.forEach(function(e){var o=(0,r.pointToPixelWorker)(e,t.request.map);e.pixel={x:o.x,y:o.y,radius:n}}),{data:o.merge(e,n),client:t}}}},function(t,e,n){\"use strict\";function r(t,e,n,r){this.x=t,this.y=e,this.h=n,this.d=s(t,e),this.max=this.d+this.h*Math.SQRT2}function o(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function i(t,e){return t.x-=e.x,t.y-=e.y,t}function a(t,e){return t.x*=e,t.y*=e,t}function u(t,e){return t.x+=e.x,t.y+=e.y,t}function c(t,e,n){var r=o(n,e);if(0===r)return o(e,t);var c=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return c<0?o(e,t):c>1?o(n,t):o(u(a(i(n,e),c),e),t)}function s(t,e){for(var n=!1,r=1/0,o=0;o<e.length;o++)for(var i=e[o],a=0,u=i.length,s=u-1;a<u;s=a++){var f=i[a],l=i[s];f.y>t.y!=l.y>t.y&&t.x<(l.x-f.x)*(t.y-f.y)/(l.y-f.y)+f.x&&(n=!n),r=Math.min(r,c(t,f,l))}return(n?1:-1)*Math.sqrt(r)}function f(t){for(var e=0,n=0,o=0,i=t[0],a=0;a<i.length-1;++a){var u=i[a+1],c=i[a],s=.5*(u[0]*c[1]-c[0]*u[1]),f=(u[0]+c[0])/3,l=(u[1]+c[1])/3;e+=s,n+=s*f,o+=s*l}return new r(n/e,o/e)}function l(t){for(var e=void 0,n=void 0,o=void 0,i=void 0,a=0;a<t[0].length;a++){var u=t[0][a];(!a||u[0]<e)&&(e=u[0]),(!a||u[1]<n)&&(n=u[1]),(!a||u[0]>o)&&(o=u[0]),(!a||u[1]>i)&&(i=u[1])}if(e==o||n==i)return null;for(var c=o-e,s=i-n,l=Math.min(c,s),h=l/2,d=new p.default(null,function(t,e){return e.max-t.max}),y=e;y<o;y+=l)for(var v=n;v<i;v+=l)d.push(new r(y+h,v+h,h,t));for(var g=f(t);d.length;){var x=d.pop();x.d>g.d&&(g=x),x.max<=g.d||(h=x.h/2,d.push(new r(x.x-h,x.y-h,h,t)),d.push(new r(x.x+h,x.y-h,h,t)),d.push(new r(x.x-h,x.y+h,h,t)),d.push(new r(x.x+h,x.y+h,h,t)))}return g}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=l;var h=n(38),p=function(t){return t&&t.__esModule?t:{default:t}}(h)},,,,,,,,,,function(t,e,n){\"use strict\";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||o,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function o(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var o=t-1>>1,i=e[o];if(n(r,i)>=0)break;e[t]=i,t=o}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,o=e[t];t<r;){var i=1+(t<<1),a=i+1,u=e[i];if(a<this.length&&n(e[a],u)<0&&(i=a,u=e[a]),n(u,o)>=0)break;e[t]=u,t=i}e[t]=o}}},,,,function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.boundaryOverlay=e.TDpost=void 0;var r=n(24),o=n(23),i=n(21),a=n(22),u=n(25),c=n(27),s=n(26),f={HeatOverlay:r.HeatOverlay,HeatTileOverlay:r.HeatTileOverlay,GriddingOverlay:o.GriddingOverlay,BoundaryOverlay:i.BoundaryOverlay,CircuitOverlay:a.CircuitOverlay,HoneycombOverlay:u.HoneycombOverlay,PolymeOverlay:c.PolymeOverlay,LablEvading:s.LablEvading};onmessage=function(t){var e=t.data;h(e)};var l={},h=function(t){for(var e=t.request,n=e.classPath,r=e.hashCode,o=e.msgId,i=n.split(\".\"),a=0,u=f;i[a];){if(u=u[i[a]],++a>=i.length){l[n]=r+\"_\"+o;var c=u(t);return void p(c.data,c.client)}if(!u)return void console.error(i[a-1]+\"worker \"+n+\" is not a function\")}},p=e.TDpost=function(t,e){var n=e,r=e.request,o=r.classPath,i=r.hashCode,a=r.msgId,u=f[o];u&&u!=i+\"_\"+a||(n.response={type:\"worker\",data:t},postMessage(n))};e.boundaryOverlay=i.BoundaryOverlay},,,,,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}])});"}return r(e,[{key:"create",value:function(e){var t=void 0;t=21==this.workerContent.length?e.indexOf("http")>-1?URL.createObjectURL(new Blob(["importScripts('"+e+"');"])):e:URL.createObjectURL(new Blob([this.workerContent],{type:"application/javascript"})),this.worker=new Worker(t),this.worker.addEventListener("message",this.message),this.worker.onerror=function(e){console.error("worker.onerror",e)}}},{key:"message",value:function(e){var t=e.data,n=t.request.hashCode,i=t.request.msgId,r=t.request.classPath;o[r+"_"+n]&&o[r+"_"+n]==n+"_"+i?o[n+"_"+i](t.response.data):o[n+"_"+i]=null}},{key:"postMessage",value:function(e,t){null==this.worker&&this.create("../dist/worker.js");var n=e.request.hashCode,i=e.request.msgId,r=e.request.classPath;o[n+"_"+i]=t,o[r+"_"+n]=n+"_"+i,this.worker.postMessage(e)}}]),e}();t.workerMrg=new a},function(e,t,n){"use strict";function i(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var r={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i.prototype={constructor:i,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){this.r=e,this.g=e,this.b=e},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:void 0,setStyle:function(e){var t=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e);if(t){var n=void 0,i=t[1],o=t[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,n[5],this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,n[5],this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return n[5],this.setHSL(a,s,l)}}}else if(t=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=t[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var h=r[e];void 0!==h&&this.setHex(h)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,i=this.g,r=this.b,o=Math.max(n,i,r),a=Math.min(n,i,r),s=void 0,l=void 0,u=(a+o)/2;if(a===o)s=0,l=0;else{var c=o-a;switch(l=u<=.5?c/(o+a):c/(2-o-a),o){case n:s=(i-r)/c+(i<r?6:0);break;case i:s=(r-n)/c+2;break;case r:s=(n-i)/c+4}s/=6}return t.h=s,t.s=l,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},getRgbaStyle:function(e){return"rgba("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+","+(e||1)+")"},offsetHSL:function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}};t.Color=i},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),r=0,o={},a=0;Function.prototype.inherits=function(e,t){var n=void 0,i=void 0,r=this.prototype,o=function(){};o.prototype=e.prototype,i=this.prototype=new o,"string"==typeof t&&(i.className=t);for(n in r)i[n]=r[n];return this.prototype.constructor=r.constructor,r=o=null,i};var s=function e(t){o[this.hashCode=t||e.guid()]=this};s.guid=function(){return"td_"+(r++).toString(36)},s.prototype.dispose=function(){this.hashCode&&(o[this.hashCode]=null);for(var e in this)"function"!=typeof this[e]&&(this[e]=null)},s.prototype.getHashCode=function(){return this.hashCode||(o[this.hashCode=s.guid()]=this),this.hashCode},s.prototype.decontrol=function(){o[this.hashCode]=null};var l=window.BMap||{Overlay:{}};s.inherits(l.Overlay,"BaseClass"),s.prototype.postMessage=function(e,t,n){var r=this.map,o=r.getCenter(),a=r.getSize(),s=this.setMsgId();if(!Array.isArray(this.points))return void console.error(" array is not defined <shouild be setPoints(Array)>");var l={type:"web",data:t,hashCode:this.hashCode,className:this.className,classPath:e,msgId:s,map:{center:{lng:o.lng,lat:o.lat},size:{width:a.width,height:a.height},zoom:r.getZoom(),margin:this.margin}};i.workerMrg.postMessage({request:l},n)},s.prototype.getMsgId=function(){return"msgId_"+a.toString(36)},s.prototype.setMsgId=function(){return a++,"msgId_"+a.toString(36)},t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=n(5),s=n(40),l=n(36),u=function(e){return e&&e.__esModule?e:{default:e}}(l);n(46);t.Map=function(){function e(t){i(this,e),this.map=null,this.option=(0,o.merge)(u.default,t),this.create()}return r(e,[{key:"create",value:function(){var e=this.option.id,t=(0,o.isString)(e)?document.getElementById(e):e,n=new BMap.Map(t,{enableMapClick:!1});if(n.enableScrollWheelZoom(),n.disableDoubleClickZoom(),n.enableKeyboard(),this.option.skin){var i="Blueness"==this.option.skin?a.Blueness:a.WhiteLover;n.setMapStyle({styleJson:i})}var r=this.crtateContainer(t),l={};Object.assign(l,this.option,{mapDom:t,toolDom:r}),n._inmapOption=l;var u=this.option.center;n.centerAndZoom(new BMap.Point(u[0],u[1]),this.option.zoom.value),n.setMinZoom(this.option.zoom.min),n.setMaxZoom(this.option.zoom.max),this.option.zoom.show&&new s.MapZoom(n),this.map=n}},{key:"getMap",value:function(){return this.map}},{key:"crtateContainer",value:function(e){var t=e,n=document.createElement("div");return n.classList.add("inmap-container"),t.appendChild(n),n}},{key:"add",value:function(e){this.map.addOverlay(e)}},{key:"remove",value:function(e){e.map&&e.dispose()}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BoundaryOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),l=n(9),u=n(0),c=n(29),h=function(e){return e&&e.__esModule?e:{default:e}}(c);t.BoundaryOverlay=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.default,e));return n.patchSplitList(),n.selectedExp={show:!1,exp:null},n}return o(t,e),a(t,[{key:"TInit",value:function(){this.initLegend()}},{key:"initLegend",value:function(){this.compileSplitList(this.style.colors,this.points),this.patchSplitList(),this.setlegend(this.legend,this.style.splitList)}},{key:"setOptionStyle",value:function(e){this._setStyle(this.baseConfig,e),this.initLegend(),this.refresh()}},{key:"compileSplitList",value:function(e,t){if(!(e.length<=0)){if(!Array.isArray(this.points))return void console.error(" array is not defined <shouild be setPoints(Array)>");t=t.sort(function(e,t){return parseFloat(e.count)-parseFloat(t.count)});for(var n=t.length/e.length,i=0,r=[],o=0,a=0,s=0;s<t.length;s++)s>n*(i+1)&&(0==r.length&&(o=t[0].count),a=t[s].count,r.push({start:o,end:a,backgroundColor:e[i]}),i++,o=t[s].count);r.length>0&&r.push({start:o,end:null,backgroundColor:e[i]}),this.style.splitList=r}}},{key:"patchSplitList",value:function(){var e=this.style.normal;null!=e.borderWidth&&null==e.borderColor&&(e.borderColor=new l.Color(e.backgroundColor).getRgbaStyle());for(var t=this.style.splitList,n=0;n<t.length;n++){var i=t[n];null==i.borderWidth&&null==e.borderColor||null!=i.borderColor||(i.borderColor=new l.Color(i.backgroundColor).getRgbaStyle())}}},{key:"setSelectd",value:function(e){if(this.points.length>0){var t=new Function("item","with(item){ return "+e+" }"),n=this.points.filter(t);n.length>0&&this.setCenterAndZoom(n[0].geo,e)}}},{key:"cancerSelectd",value:function(){this.cancerExp(),this.selectItem=[],this.refresh()}},{key:"setWorkerData",value:function(e){this.workerData=e,this.filterFun&&(this.selectItem=this.workerData.filter(this.filterFun))}},{key:"parserExp",value:function(e){e&&(this.selectedExp.show=!0,this.selectedExp.exp=e,this.filterFun=new Function("item","with(item){ return "+e+" }"))}},{key:"swopData",value:function(e,t){e>-1&&(this.workerData[e]=this.workerData[this.workerData.length-1],this.workerData[this.workerData.length-1]=t),this.cancerExp()}},{key:"cancerExp",value:function(){this.selectedExp.show=!1,this.selectedExp.exp=null,this.filterFun=null}},{key:"resize",value:function(){this.drawMap()}},{key:"getGeoCenter",value:function(e){for(var t=e[0][0],n=e[0][1],i=e[0][0],r=e[0][1],o=1;o<e.length;o++)t=Math.min(t,e[o][0]),i=Math.max(i,e[o][0]),n=Math.min(n,e[o][1]),r=Math.max(r,e[o][1]);return[t+(i-t)/2,n+(r-n)/2]}},{key:"setMapCenter",value:function(e,t){var n=this;this.parserExp(t),n.workerData.length>0&&(n.selectItem=n.workerData.filter(n.filterFun),n.refresh())}},{key:"setMapCenterAndZoom",value:function(e,t){function n(){a.map.removeEventListener("zoomend",n),a.map.panTo(o.center)}function i(){a.map.removeEventListener("moveend",i),a.parserExp(t),a.workerData.length>0&&(a.selectItem=a.workerData.filter(a.filterFun),a.refresh())}var r=[];e.forEach(function(e){r.push(new BMap.Point(e[0],e[1]))});var o=this.map.getViewport(r),a=this,s=o.zoom-1;this.map.addEventListener("zoomend",n),this.map.addEventListener("moveend",i),this.map.getZoom()==s?n():this.map.setZoom(s)}},{key:"setCenterAndZoom",value:function(e,t,n){n?this.setMapCenterAndZoom(e,t):this.setMapCenter(e,t)}},{key:"getMaxWidth",value:function(e){for(var t=e[0][0],n=e[0][1],i=e[0][0],r=e[0][1],o=1;o<e.length;o++)t=Math.min(t,e[o][0]),i=Math.max(i,e[o][0]),n=Math.min(n,e[o][1]),r=Math.max(r,e[o][1]);return i-t}},{key:"findIndexSelectItem",value:function(e){var t=-1;return e&&(t=this.selectItem.findIndex(function(t){return t&&t.name==e.name})),t}},{key:"refresh",value:function(){this.clearCanvas(),this.drawLine(this.workerData),this.cancerExp()}},{key:"drawMap",value:function(){var e=this;this.postMessage("BoundaryOverlay.calculatePixel",this.points,function(t){"onmoving"!=e.eventType&&(e.clearCanvas(),e.canvasResize(),e.overItem=null,e.setWorkerData(t),e.drawLine(t))})}},{key:"setPoints",value:function(e){if(!(0,u.isArray)(e))throw new TypeError("data must be a Array");this.cancerSelectd(),this.points=e,this.initLegend(),this.drawMap()}},{key:"getTarget",value:function(e,t){var n=this.workerData;this.ctx.beginPath();for(var i=0,r=n.length;i<r;i++){var o=n[i],a=o.pgeo;this.ctx.beginPath(),this.ctx.moveTo(a[0][0],a[0][1]);for(var s=1;s<a.length;s++)this.ctx.lineTo(a[s][0],a[s][1]);if(this.ctx.closePath(),this.ctx.isPointInPath(e*this.devicePixelRatio,t*this.devicePixelRatio))return{index:i,item:o}}return{index:-1,item:null}}},{key:"drawLine",value:function(e){this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=4;for(var t=0,n=e.length;t<n;t++){var i=e[t],r=i.pgeo,o=this.setDrawStyle(i);this.ctx.beginPath(),this.ctx.shadowColor=o.shadowColor||"transparent",this.ctx.shadowBlur=o.shadowBlur||10,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.fillStyle=o.backgroundColor,this.ctx.moveTo(r[0][0],r[0][1]);for(var a=1;a<r.length;a++)this.ctx.lineTo(r[a][0],r[a][1]);this.ctx.closePath(),this.ctx.fill(),this.ctx.strokeStyle=o.borderColor,this.ctx.lineWidth=o.borderWidth,this.ctx.stroke()}for(var s=0,l=e.length;s<l;s++){var u=e[s],c=u.pgeo,h=u.bestCell,f=this.setDrawStyle(u).label;if(h&&f.show){this.ctx.shadowBlur=0,this.ctx.lineWidth=f.lineWidth,this.ctx.font=f.font,this.ctx.fillStyle=f.color;var p=this.ctx.measureText(u.name).width;this.getMaxWidth(c)>p&&this.ctx.fillText(u.name,h.x-p/2,h.y)}}this.ctx.closePath()}}]),t}(s.Parameter)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CircuitOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),l=n(2),u=n(30),c=function(e){return e&&e.__esModule?e:{default:e}}(u);t.CircuitOverlay=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.points=[],n.style={},n._setStyle(c.default,e),n._isCoordinates=!1,n}return o(t,e),a(t,[{key:"_setStyle",value:function(e,t){var n=(0,s.merge)(e,t);this.points=t.data?n.data:this.points,this.style=n.style,this.tMapStyle(n.skin)}},{key:"resize",value:function(){this.drawMap()}},{key:"setOptionStyle",value:function(e){this._setStyle(c.default,e),this.coordinates(this.points),this.drawMap()}},{key:"setPoints",value:function(e){if(!(0,s.isArray)(e))throw new TypeError("data must be a Array");this.points=e,this.coordinates(this.points),this.drawMap()}},{key:"drawMap",value:function(){var e=this,t=Math.pow(2,18-this.map.getZoom()),n=this.map.getMapType().getProjection(),i=n.lngLatToPoint(this.map.getCenter()),r=new BMap.Pixel(i.x-this.map.getSize().width/2*t,i.y+this.map.getSize().height/2*t),o={points:e.points,nwMc:r,zoomUnit:t};this._isCoordinates||this.coordinates(this.points),this.postMessage("CircuitOverlay.calculatePixel",o,function(t){"onmoving"!=e.eventType&&(e.clearCanvas(),e.canvasResize(),e.drawLine(t))})}},{key:"coordinates",value:function(e){this._isCoordinates=!0;for(var t=this.map.getMapType().getProjection(),n=0;n<e.length;n++){var i=e[n];i._coordinates=i.geo.map(function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]})}}},{key:"transferCoordinate",value:function(e,t,n){return e.map(function(e){return[(e[0]-t.x)/n,(t.y-e[1])/n]})}},{key:"lngLatToPoints",value:function(e,t,n){return e.length>0?this.transferCoordinate(e,t,n):[]}},{key:"drawLine",value:function(e){var t=this.style.normal;this.ctx.shadowBlur=0,this.ctx.shadowOffsetX=0,this.ctx.shadowOffsetY=0,this.ctx.lineCap="butt",this.ctx.lineJoin="miter",this.ctx.globalCompositeOperation="lighter",this.ctx.miterLimit=10,this.ctx.strokeStyle=t.borderColor,this.ctx.lineWidth=t.borderWidth,this.ctx.beginPath();for(var n=0;n<e.length;n++){var i=e[n],r=i.pixels;this.ctx.moveTo(r[0][0],r[0][1]);for(var o=1;o<r.length;o++)this.ctx.lineTo(r[o][0],r[o][1]);this.ctx.stroke()}}}]),t}(l.CanvasOverlay)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DotOverlay=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=n(6),c=n(3),h=n(0),f=n(41),p=i(f),d=n(31),y=i(d),v=(0,h.detectmob)();t.DotOverlay=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,y.default,e));return n.polyme="polyme"==e.type,n._loopDraw=n._loopDraw.bind(n),(0,h.isEmpty)(n._option.draw)||(n.batchesData=new p.default(n._option.draw)),n.mouseLayer=new l.CanvasOverlay,n}return a(t,e),s(t,[{key:"TInit",value:function(){this.map.addOverlay(this.mouseLayer),this.style.colors.length>0?this.compileSplitList(this.points):this.setlegend(this.legend,this.style.splitList)}},{key:"setOptionStyle",value:function(e){this._setStyle(this.baseConfig,e),(0,h.isEmpty)(this._option.draw)?this.batchesData=null:this.batchesData=new p.default(this._option.draw),this.TInit(),this.refresh()}},{key:"resize",value:function(){this.drawMap()}},{key:"drawMouseLayer",value:function(){var e=this.overItem?[this.overItem]:[];this.mouseLayer.clearCanvas(),this._loopDraw(this.mouseLayer.ctx,this.selectItem.concat(e))}},{key:"drawMap",value:function(){var e=this;this.batchesData&&this.batchesData.clear();var t=e.polyme?"PolymeOverlay.mergePoint":"HeatOverlay.pointsToPixels",n=e.polyme?{points:this.points,mergeCount:this.style.normal.mergeCount,size:this.style.normal.size}:this.points;this.postMessage(t,n,function(t){"onmoving"!=e.eventType&&(e.setWorkerData(t),e.updateOverClickItem(),e.refresh())})}},{key:"updateOverClickItem",value:function(){for(var e=this,t=this.overItem?[this.overItem]:[],n=this.selectItem.concat(t),i=0;i<n.length;i++)!function(t){var i=n[t],r=e.workerData.find(function(e){return e&&e.lat==i.lat&&e.lng==i.lng&&e.count==i.count});i.pixel=r.pixel}(i)}},{key:"cancerSelectd",value:function(){this.selectItem=[]}},{key:"setPoints",value:function(e){if(!(0,h.isArray)(e))throw new TypeError("data must be a Array");this.cancerSelectd(),this.points=e,this.style.colors.length>0&&this.compileSplitList(this.points),this.drawMap()}},{key:"compileSplitList",value:function(e){var t=this.style.colors;if(!(t.length<=0)){e=e.sort(function(e,t){return parseFloat(e.count)-parseFloat(t.count)});for(var n=e.length/t.length,i=0,r=[],o=0,a=0,s=0;s<e.length;s++)s>n*(i+1)&&(0==r.length&&(o=e[0].count),a=e[s].count,r.push({start:o,end:a,backgroundColor:t[i]}),i++,o=e[s].count);r.length>0&&r.push({start:o,end:null,backgroundColor:t[i]}),this.style.splitList=r,this.setlegend(this.legend,this.style.splitList)}}},{key:"getTarget",value:function(e,t){for(var n=this.workerData,i=this.ctx,r=0,o=n.length;r<o;r++){var a=n[r],s=a.pixel,l=this.polyme?this.style.normal:this.setDrawStyle(a);if(i.beginPath(),i.arc(s.x,s.y,l.size,0,2*Math.PI,!0),i.lineWidth=l.borderWidth,i.isPointInPath(e*this.devicePixelRatio,t*this.devicePixelRatio))return{index:r,item:a}}return{index:-1,item:null}}},{key:"findIndexSelectItem",value:function(e){var t=-1;return e&&(t=this.selectItem.findIndex(function(t){return t&&t.lat==e.lat&&t.lng==e.lng&&t.count==e.count})),t}},{key:"refresh",value:function(){this.clearCanvas(),this.canvasResize(),this.mouseLayer.canvasResize(),this.batchesData?this.batchesData.action(this.workerData,this._loopDraw,this.ctx):this._loopDraw(this.ctx,this.workerData),this.style.normal.label.show&&this._drawLabel(this.ctx,this.workerData),this.drawMouseLayer()}},{key:"swopData",value:function(e,t){e>-1&&!this.style.normal.label.show&&(this.workerData[e]=this.workerData[this.workerData.length-1],this.workerData[this.workerData.length-1]=t)}},{key:"_loopDraw",value:function(e,t){for(var n=0,i=t.length;n<i;n++){var r=t[n],o=r.pixel,a=this.polyme?this.style.normal:this.setDrawStyle(r);a.shadowBlur&&(e.shadowBlur=a.shadowBlur),a.shadowColor&&(e.shadowColor=a.shadowColor),a.globalCompositeOperation&&(e.globalCompositeOperation=a.globalCompositeOperation);var s=this.polyme?o.radius:a.size;o.radius=s,this._drawCircle(e,o.x,o.y,s,a.backgroundColor,a.borderWidth,a.borderColor)}}},{key:"_drawLabel",value:function(e,t){var n=this,i=this.style.normal.label,r=parseInt(i.font);e.font=i.font,e.textBaseline="top",e.fillStyle=i.color;var o=e.measureText("a").width,a=t.map(function(e){var t=e.pixel.radius+n.style.normal.borderWidth;return new u.Label(e.pixel.x,e.pixel.y,t,r,o,e.name)});a.sort(function(e,t){return t.x-e.x});var s=void 0;do{s=!1;for(var l=0;l<a.length;l++)for(var c=a[l],h=0;h<a.length;h++)if(l!=h&&c.show&&c.isAnchorMeet(a[h])){c.next(),s=!0;break}}while(s);a.forEach(function(t){if(t.show){var n=t.getCurrentRect();e.beginPath(),e.fillText(t.text,n.x,n.y),e.fill()}})}},{key:"_drawCircle",value:function(e,t,n,i,r,o,a){e.beginPath(),e.fillStyle=r,e.arc(t,n,i,0,2*Math.PI,!0),e.fill(),o&&(e.lineWidth=o,a&&(e.strokeStyle=a),e.stroke())}},{key:"Tdispose",value:function(){this.map.removeOverlay(this.mouseLayer)}},{key:"tMousemove",value:function(e){if("onmoving"!=this.eventType&&(this.tooltip.show||!(0,h.isEmpty)(this.style.mouseOver))){var t=this.getTarget(e.pixel.x,e.pixel.y),n=t.item;n!=this.overItem&&(this.overItem=n,this.eventType="mousemove",(0,h.isEmpty)(this.style.mouseOver)||this.drawMouseLayer()),n?this.map.setDefaultCursor("pointer"):this.map.setDefaultCursor("default"),this.setTooltip(e)}}},{key:"tMouseClick",value:function(e){if("onmoving"!=this.eventType){var t=this.event.multiSelect,n=this.getTarget(e.pixel.x,e.pixel.y);if(-1!=n.index){var i=n.item;t?this.selectItemContains(i)?this.deleteSelectItem(i):this.selectItem.push(n.item):this.selectItem=[n.item],this.event.onMouseClick(this.selectItem,e),v&&(this.overItem=[i],this.setTooltip(e)),this.drawMouseLayer()}}}}]),t}(c.Parameter)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GriddingOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),l=n(0),u=n(32),c=function(e){return e&&e.__esModule?e:{default:e}}(u);t.GriddingOverlay=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.default,e));return n.delteOption(),n}return o(t,e),a(t,[{key:"TInit",value:function(){this.compileSplitList(this.points)}},{key:"setOptionStyle",value:function(e){this._setStyle(this.baseConfig,e),this.TInit(),this.refresh()}},{key:"delteOption",value:function(){this.style.selected=null}},{key:"refresh",value:function(){this.drawMap()}},{key:"resize",value:function(){this.drawMap()}},{key:"drawMap",value:function(){var e=this,t=this.style,n=t.normal,i=t.type,r=e.map.getZoom(),o=Math.pow(2,18-r),a=e.map.getMapType().getProjection(),s=a.lngLatToPoint(e.map.getCenter()),l=n.size*o,u=s.x-e.map.getSize().width/2*o,c=new BMap.Pixel(u,s.y+e.map.getSize().height/2*o),h={points:e.points,size:l,type:i,nwMc:c,zoomUnit:o,mapSize:e.map.getSize(),mapCenter:e.map.getCenter(),zoom:r};this.postMessage("GriddingOverlay.toRecGrids",h,function(t){if("onmoving"!=e.eventType){var n=t.grids;e.clearCanvas(),e.canvasResize(),e.setWorkerData({size:l,zoomUnit:o,grids:[]}),e.createColorSplit(n),e.drawRec(l,o,n)}})}},{key:"setPoints",value:function(e){if(!(0,l.isArray)(e))throw new TypeError("data must be a Array");this.points=e,this.drawMap()}},{key:"getTarget",value:function(e,t){for(var n=this.workerData,i=n.size,r=n.zoomUnit,o=n.grids||[],a=i/r,s=this.style.normal,l=a-s.borderWidth,u=0;u<o.length;u++){var c=o[u],h=parseFloat(c.pixels[0]),f=parseFloat(c.pixels[1]);if(this.ctx.beginPath(),this.ctx.moveTo(h,f),this.ctx.lineTo(h+l,f),this.ctx.lineTo(h+l,f+l),this.ctx.lineTo(h,f+l),this.ctx.closePath(),this.ctx.isPointInPath(e,t))return{index:u,item:c}}return{index:-1,item:null}}},{key:"compileSplitList",value:function(e){var t=this.style.colors;if(!(t.length<0||e.length<=0)){e=e.sort(function(e,t){return parseFloat(e.count)-parseFloat(t.count)});for(var n=[1,1,2,3,5,8,13,21,34,55,89,144],i=n.slice(0,t.length).reverse(),r=i.reduce(function(e,t){return e+t},0),o=[],a=0,s=0,l=0,u=e.length,c=0;c<i.length;c++)a=0==o.length?e[0].count:o[c-1].end,c==i.length-1?s=null:(l=parseInt(i[c]/r*u)+l,s=e[l].count),o.push({start:a,end:s,backgroundColor:t[c]});this.style.splitList=o,this.setlegend(this.legend,this.style.splitList)}}},{key:"createColorSplit",value:function(e){var t=[];for(var n in e){var i=e[n];i>0&&t.push({name:n,count:i})}this.style.colors.length>0&&this.compileSplitList(t)}},{key:"setlegendParams",value:function(){}},{key:"getColor",value:function(e){var t=null;if(0==e)t="rgba(255,255,255,0)";else{t=this.setDrawStyle({count:e}).backgroundColor}return t}},{key:"drawRec",value:function(e,t,n){this.workerData.grids=[];var i=e/t,r=this.style.normal;for(var o in n){var a=o.split("_"),s=a[0],l=a[1],u=n[o],c=this.getColor(u);this.ctx.fillStyle=c,this.ctx.fillRect(s,l,i-r.padding,i-r.padding),u>0&&this.workerData.grids.push({pixels:[s,l],count:u})}}}]),t}(s.Parameter)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HeatOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),l=n(0),u=n(33),c=function(e){return e&&e.__esModule?e:{default:e}}(u);t.HeatOverlay=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.points=[],n._setStyle(c.default,e),n.delteOption(),n}return o(t,e),a(t,[{key:"resize",value:function(){this.drawMap()}},{key:"_setStyle",value:function(e,t){t=t||{};var n=(0,l.merge)(e,t);this.style=n.style,this.gradient=n.style.gradient,this.points=t.data?n.data:this.points,this.tMapStyle(n.skin)}},{key:"setOptionStyle",value:function(e){this._setStyle(c.default,e),this.delteOption(),this.drawMap()}},{key:"delteOption",value:function(){this.tooltip={show:!1},this.legend={show:!1}}},{key:"setPoints",value:function(e){if(!(0,l.isArray)(e))throw new TypeError("data must be a Array");this.points=e,this.drawMap()}},{key:"getMax",value:function(){var e=this.style.normal;e.maxValue=0;for(var t=0,n=this.points.length;t<n;t++)this.points[t].count>e.maxValue&&(e.maxValue=this.points[t].count)}},{key:"drawMap",value:function(){var e=this;this.postMessage("HeatOverlay.pointsToPixels",this.points,function(t){"onmoving"!=e.eventType&&(e.clearCanvas(),e.canvasResize(),e.workerData=t,e.refresh())})}},{key:"refresh",value:function(){var e=this.style.normal,t=this.container;if(0==e.maxValue&&this.getMax(),!(t.width<=0)){for(var n=this.ctx,i=0,r=this.workerData.length;i<r;i++){var o=this.workerData[i],a=(o.count-e.minValue)/(e.maxValue-e.minValue);a=a>1?1:a,this.drawPoint(o.pixel.x,o.pixel.y,e.radius,a)}for(var s=this.getColorPaint(),l=n.getImageData(0,0,t.width,t.height),u=l.data,c=255*e.maxOpacity,h=255*e.minOpacity,f=255*(e.maxScope>1?1:e.maxScope),p=255*(e.minScope<0?0:e.minScope),d=u.length,y=3;y<d;y+=4){var v=u[y],m=4*v;m&&(u[y-3]=s[m],u[y-2]=s[m+1],u[y-1]=s[m+2],u[y]>f&&(u[y]=0),u[y]<p&&(u[y]=0),u[y]>c&&(u[y]=c),u[y]<h&&(u[y]=h))}n.putImageData(l,0,0,0,0,t.width,t.height)}}},{key:"drawPoint",value:function(e,t,n,i){var r=this.ctx;r.globalAlpha=i,r.beginPath();var o=r.createRadialGradient(e,t,0,e,t,n);o.addColorStop(0,"rgba(0,0,0,1)"),o.addColorStop(1,"rgba(0,0,0,0)"),r.fillStyle=o,r.arc(e,t,n,0,2*Math.PI,!0),r.closePath(),r.fill()}},{key:"getColorPaint",value:function(){var e=this.gradient,t=document.createElement("canvas"),n=t.getContext("2d");t.width=256,t.height=1;var i=n.createLinearGradient(0,0,256,1);for(var r in e)i.addColorStop(r,e[r]);return n.fillStyle=i,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data}}]),t}(s.CanvasOverlay)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HoneycombOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),l=n(0),u=n(34),c=function(e){return e&&e.__esModule?e:{default:e}}(u);t.HoneycombOverlay=function(e){function t(e){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.default,e))}return o(t,e),a(t,[{key:"TInit",value:function(){this.delteOption(),this.compileSplitList(this.points)}},{key:"setOptionStyle",value:function(e){this._setStyle(this.baseConfig,e),this.TInit(),this.refresh()}},{key:"delteOption",value:function(){this.style.selected=null}},{key:"refresh",value:function(){this.drawMap()}},{key:"resize",value:function(){this.drawMap()}},{key:"setPoints",value:function(e){if(!(0,l.isArray)(e))throw new TypeError("data must be a Array");this.points=e,this.drawMap()}},{key:"drawMap",value:function(){var e=this,t=this.style.normal,n=e.map.getZoom(),i=Math.pow(2,18-n),r=e.map.getMapType().getProjection(),o=r.lngLatToPoint(e.map.getCenter()),a=t.size*i,s=o.x-e.map.getSize().width/2*i,l=new BMap.Pixel(s,o.y+e.map.getSize().height/2*i),u={points:e.points,size:a,nwMc:l,zoomUnit:i,mapSize:e.map.getSize(),mapCenter:e.map.getCenter(),zoom:n};this.postMessage("HoneycombOverlay.toRecGrids",u,function(t){if("onmoving"!=e.eventType){e.clearCanvas(),e.canvasResize();var n=t.grids,r=t.max,o=t.min,s={size:a,zoomUnit:i,max:r,min:o,grids:n,margin:e.margin};e.setWorkerData(s),e.createColorSplit(n),e.drawRec(s)}})}},{key:"createColorSplit",value:function(e){var t=[];for(var n in e){var i=e[n].len;i>0&&t.push({name:n,count:i})}this.style.colors.length>0&&this.compileSplitList(t)}},{key:"compileSplitList",value:function(e){var t=this.style.colors;if(!(t.length<0||e.length<=0)){e=e.sort(function(e,t){return parseFloat(e.count)-parseFloat(t.count)});for(var n=[1,1,2,3,5,8,13,21,34,55,89,144],i=n.slice(0,t.length).reverse(),r=i.reduce(function(e,t){return e+t},0),o=[],a=0,s=0,l=0,u=e.length,c=0;c<i.length;c++)a=0==o.length?e[0].count:o[c-1].end,c==i.length-1?s=null:(l=parseInt(i[c]/r*u)+l,s=e[l].count),o.push({start:a,end:s,backgroundColor:t[c]});this.style.splitList=o,this.setlegend(this.legend,this.style.splitList)}}},{key:"getColor",value:function(e){var t=null;if(0==e)t="rgba(255,255,255,0)";else{t=this.setDrawStyle({count:e}).backgroundColor}return t}},{key:"getTarget",value:function(e,t){for(var n=this.workerData,i=n.size,r=n.zoomUnit,o=n.grids||[],a=i/r,s=this.style.normal,l=a-s.borderWidth,u=0;u<o.length;u++){var c=o[u],h=parseFloat(c.pixels[0]),f=parseFloat(c.pixels[1]);if(this.ctx.beginPath(),this.ctx.moveTo(h,f),this.ctx.lineTo(h+l,f),this.ctx.lineTo(h+l,f+l),this.ctx.lineTo(h,f+l),this.ctx.closePath(),this.ctx.isPointInPath(e,t))return{index:u,item:c}}return{index:-1,item:null}}},{key:"drawRec",value:function(e){var t=e.size,n=e.zoomUnit,i=e.grids;this.workerData.grids=[];var r=t/n,o=this.style.normal;for(var a in i){var s=i[a].x,l=i[a].y,u=i[a].len;if(u>0){var c=this.getColor(u);this.drawLine(s,l,r-o.padding,c,this.ctx)}}}},{key:"drawLine",value:function(e,t,n,i,r){r.beginPath(),r.fillStyle=i,r.moveTo(e,t-n/2),r.lineTo(e+n/2,t-n/4),r.lineTo(e+n/2,t+n/4),r.lineTo(e,t+n/2),r.lineTo(e-n/2,t+n/4),r.lineTo(e-n/2,t-n/4),r.fill(),r.closePath()}}]),t}(s.Parameter)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImgOverlay=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),l=n(35),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(0);t.ImgOverlay=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u.default,e));return n.cacheImg={},n}return o(t,e),a(t,[{key:"resize",value:function(){this.drawMap()}},{key:"setOptionStyle",value:function(e){this._setStyle(this.baseConfig,e),this.refresh()}},{key:"TInit",value:function(){}},{key:"drawMap",value:function(){var e=this;this.postMessage("HeatOverlay.pointsToPixels",this.points,function(t){"onmoving"!=e.eventType&&(e.setWorkerData(t),e.refresh())})}},{key:"setPoints",value:function(e){if(!(0,c.isArray)(e))throw new TypeError("data must be a Array");this.cancerSelectd(),this.points=e,this.drawMap()}},{key:"cancerSelectd",value:function(){this.selectItem=[]}},{key:"_isMouseOver",value:function(e,t,n,i,r,o){return!(e<n||e>n+r||t<i||t>i+o)}},{key:"getTarget",value:function(e,t){for(var n=this.workerData,i=this.ctx,r=0,o=n.length;r<o;r++){var a=n[r],s=a.pixel,l=this.setDrawStyle(a);i.beginPath();var u=this.cacheImg[l.icon];if(!u)break;if(l.width&&l.height){var c=this._getDrawXY(s,l.offsets.left,l.offsets.top,l.width,l.height,1);if(this._isMouseOver(e,t,c.x,c.y,l.width,l.height))return{index:r,item:a}}else{var h=this._getDrawXY(s,l.offsets.left,l.offsets.top,l.width,l.height);if(this._isMouseOver(e,t,h.x,h.y,u.width,u.height))return{index:r,item:a}}}return{index:-1,item:null}}},{key:"findIndexSelectItem",value:function(e){var t=-1;return e&&(t=this.selectItem.findIndex(function(t){return t&&t.lat==e.lat&&t.lng==e.lng})),t}},{key:"refresh",value:function(){this.clearCanvas(),this.canvasResize(),this._loopDraw(this.ctx,this.workerData)}},{key:"loadImg",value:function(e,t){var n=this;if((0,c.isString)(e)){var i=n.cacheImg[e];if(i)t(i);else{var r=new Image;r.src=e,r.onload=function(){n.cacheImg[e]=r,t(r)}}}else t(e)}},{key:"isPercent",value:function(e){return e.toString().indexOf("%")>-1}},{key:"_getDrawXY",value:function(e,t,n,i,r){var o=0,a=0,s=i,l=r,u=parseFloat(t),c=parseFloat(n);return o=this.isPercent(t)?e.x+s*u/100:e.x+u,a=this.isPercent(n)?e.y+l*c/100:e.y+c,{x:o,y:a}}},{key:"setDrawStyle",value:function(e){var t=this.style.normal,n={};Object.assign(n,t);for(var i=this.style.splitList,r=0;r<i.length;r++){var o=i[r];if(null==o.end){if(e.count>=o.start){Object.assign(n,t,o);break}}else if(e.count>=o.start&&e.count<o.end){Object.assign(n,t,o);break}}return n}},{key:"_loopDraw",value:function(e,t){for(var n=this,i=0,r=t.length;i<r;i++)!function(e,i){var r=t[e],o=r.pixel,a=n.setDrawStyle(r);n.loadImg(a.icon,function(e){if(a.width&&a.height){var t=n._getDrawXY(o,a.offsets.left,a.offsets.top,a.width,a.height);n._drawImage(n.ctx,e,t.x,t.y,a.width,a.height)}else{var i=n._getDrawXY(o,a.offsets.left,a.offsets.top,e.width,e.height,1);n._drawImage(n.ctx,e,i.x,i.y,e.width,e.height)}})}(i)}},{key:"_drawImage",value:function(e,t,n,i,r,o){e.drawImage(t,n,i,r,o)}}]),t}(s.Parameter)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MoveLineOverlay=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=n(0),c=n(5),h=n(37),f=i(h),p=n(11),d=i(p),y=function(){function e(t){a(this,e),this.style={markerColor:t.markerColor||t.color,markerRadius:t.markerRadius,fontColor:t.color},this.text=t.name,this.point=t.point}return s(e,[{key:"draw",value:function(e,t){var n=t.pointToPixel(this.point),i=n.x,r=n.y,o=this.style,a=o.markerColor,s=o.markerRadius,l=o.fontColor;e.save(),e.beginPath(),e.fillStyle=a,e.arc(i,r,s,0,2*Math.PI,!0),e.closePath(),e.fill(),e.textAlign="center",e.textBaseline="middle",e.font="12px Microsoft YaHei",e.fillStyle=l||a,e.fillText(this.text,i,r-10),e.restore()}}]),e}(),v=function(){function e(t){a(this,e),this.from=t.from,this.to=t.to,this.id=t.id,this.step=0,this.path=null}return s(e,[{key:"getPointList",value:function(e,t){var n=[[e.x,e.y],[t.x,t.y]],i=n[1][0],r=n[1][1];return n[3]=[i,r],n[1]=this.getOffsetPoint(n[0],n[3]),n[2]=this.getOffsetPoint(n[3],n[0]),n=this.smoothSpline(n,!1),n[n.length-1]=[i,r],n}},{key:"getOffsetPoint",value:function(e,t){var n=this.getDistance(e,t)/3,i=void 0,r=void 0,o=void 0,a=[e[0],e[1]];if(e[0]!=t[0]&&e[1]!=t[1]){var s=(t[1]-e[1])/(t[0]-e[0]);i=Math.atan(s)}else i=e[0]==t[0]?(e[1]<=t[1]?1:-1)*Math.PI/2:0;return e[0]<=t[0]?(i-=-.2,r=Math.round(Math.cos(i)*n),o=Math.round(Math.sin(i)*n),a[0]+=r,a[1]+=o):(i+=-.2,r=Math.round(Math.cos(i)*n),o=Math.round(Math.sin(i)*n),a[0]-=r,a[1]-=o),a}},{key:"smoothSpline",value:function(e,t){for(var n=e.length,i=[],r=0,o=1;o<n;o++)r+=this.getDistance(e[o-1],e[o]);var a=r/2;a=a<n?n:a;for(var s=0;s<a;s++){var l=s/(a-1)*(t?n:n-1),u=Math.floor(l),c=l-u,h=void 0,f=e[u%n],p=void 0,d=void 0;t?(h=e[(u-1+n)%n],p=e[(u+1)%n],d=e[(u+2)%n]):(h=e[0===u?u:u-1],p=e[u>n-2?n-1:u+1],d=e[u>n-3?n-1:u+2]);var y=c*c,v=c*y;i.push([this.interpolate(h[0],f[0],p[0],d[0],c,y,v),this.interpolate(h[1],f[1],p[1],d[1],c,y,v)])}return i}},{key:"interpolate",value:function(e,t,n,i,r,o,a){var s=.5*(n-e),l=.5*(i-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*r+t}},{key:"getDistance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"drawMarker",value:function(e,t){this.from.draw(e,t),this.to.draw(e,t)}},{key:"drawLinePath",value:function(e,t,n){var i=this.path=this.getPointList(n.pointToPixel(this.from.point),n.pointToPixel(this.to.point)),r=i.length;if(e.save(),e.beginPath(),e.lineWidth=t.lineWidth,e.strokeStyle=t.colors[this.id],t.lineType&&"solid"!=t.lineType){if("dashed"==t.lineType||"dotted"==t.lineType)for(var o=1;o<r;o+=2)e.moveTo(i[o-1][0],i[o-1][1]),e.lineTo(i[o][0],i[o][1])}else{e.moveTo(i[0][0],i[0][1]);for(var a=0;a<r;a++)e.lineTo(i[a][0],i[a][1])}e.stroke(),e.restore(),this.step=0}},{key:"drawMoveCircle",value:function(e,t,n){var i=this.path||this.getPointList(n.pointToPixel(this.from.point),n.pointToPixel(this.to.point));e.save(),e.fillStyle=t.fillColor,e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowBlur,e.beginPath(),e.arc(i[this.step][0],i[this.step][1],t.moveRadius,0,2*Math.PI,!0),e.fill(),e.closePath(),e.restore(),this.step+=1,this.step>=i.length&&(this.step=0)}}]),e}();t.MoveLineOverlay=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.markLines=[],n.map=null,n.style=null,n.data=e.data||[],n.baseLayer=null,n.animationLayer=null,n.setOptionStyle(e),n}return o(t,e),s(t,[{key:"setOptionStyle",value:function(e){var t=(0,u.merge)(f.default,e);this.style=t.style.normal,this.data=e.data?t.data:this.data,this.tMapStyle(this.style.skin),this.baseLayer&&(this.markLines.length=0,this.draw())}},{key:"tMapStyle",value:function(e){var t=null;(0,u.isString)(e)?t="Blueness"==e?c.Blueness:c.WhiteLover:(0,u.isObject)(e)&&(t=e),e&&this.map&&this.map.setMapStyle({styleJson:t})}},{key:"initialize",value:function(e){function t(){var t=o.style,r=i.ctx;if(r){if(!i.animationFlag)return void i.clearCanvas();r.fillStyle="rgba(0,0,0,0.93)";var a=r.globalCompositeOperation;r.globalCompositeOperation="destination-in";var s=e.getSize();r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation=a;for(var l=0;l<n.length;l++){n[l].drawMoveCircle(r,t,e)}}}this.map=e,this.baseLayer=new l.CanvasOverlay({repaintEnd:this.draw.bind(this)}),this.animationLayer=new l.CanvasOverlay,e.addOverlay(this.baseLayer),e.addOverlay(this.animationLayer);var n=this.markLines,i=this.animationLayer,r=this.style,o=this,a=void 0,s=Date.now(),u=1e3/r.fps,c=void 0;!function e(){requestAnimationFrame(e),a=Date.now(),(c=a-s)>u&&(s=a-c%u,t())}()}},{key:"drawBaseLayer",value:function(){var e=this.baseLayer.ctx;if(e){0==this.markLines.length&&this.addMarkLine();var t=this.style,n=this.map;this.baseLayer.clearCanvas(),this.markLines.forEach(function(i){i.drawMarker(e,n),i.drawLinePath(e,t,n)})}}},{key:"addMarkLine",value:function(){var e=this.style,t=this.markLines,n=this.data;t.length=0,n.forEach(function(n,i){t.push(new v({id:i,from:new y({name:n.from.city,markerColor:e.markerColor,markerRadius:e.markerRadius,point:new BMap.Point(n.from.lnglat[0],n.from.lnglat[1]),color:e.markerColor||e.colors[i]}),to:new y({name:n.to.city,markerColor:e.markerColor,markerRadius:e.markerRadius,point:new BMap.Point(n.to.lnglat[0],n.to.lnglat[1]),color:e.markerColor||e.colors[i]})}))})}},{key:"setPoints",value:function(e){if(!(0,u.isArray)(e))throw new TypeError("data must be a Array");this.data=e,this.markLines.length=0,this.draw()}},{key:"draw",value:function(){this.baseLayer.canvasResize(),this.animationLayer.canvasResize(),this.drawBaseLayer()}}]),t}(d.default)},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tooltip:{show:!1,customClass:"inmap-tooltip-black",offsets:{top:5,left:12}},legend:{show:!1,toFixed:2},style:{normal:{borderWidth:.1,backgroundColor:"rgba(200, 200, 200, 0.5)",mergeCount:1.5,label:{show:!1,color:"rgba(0,0,0,1)",font:"13px Arial"}},colors:[],splitList:[]},data:[],event:{multiSelect:!1,onMouseClick:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={style:{normal:{borderColor:"rgba(50, 50, 255, 0.8)",borderWidth:.05}},data:[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tooltip:{show:!1,customClass:"inmap-tooltip-black",offsets:{top:5,left:12}},legend:{show:!1,toFixed:2},draw:{},style:{normal:{borderWidth:.1,backgroundColor:"rgba(200, 200, 200, 0.5)",mergeCount:1.5,label:{show:!1,color:"rgba(0,0,0,1)",font:"13px Arial"}},colors:[],splitList:[]},data:[],event:{multiSelect:!1,onMouseClick:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tooltip:{show:!0,position:"top",formatter:"{count}",offsets:{top:5,left:12}},legend:{show:!0,title:"图例"},style:{type:"svg",colors:["rgba(31,98,1,1)","rgba(95,154,4,1)","rgba(139,227,7,1)","rgba(218,134,9,1)","rgba(220,54,6,1)","rgba(218,2,8,1)","rgba(148,1,2,1)","rgba(92,1,0,1)"],normal:{backgroundColor:"rgba(200, 200, 200, 0.5)",padding:1,size:50,label:{show:!1,font:"12px sans-serif",shadowBlur:0,lineWidth:1,color:"rgba(75,80,86,1)"}},mouseOver:{backgroundColor:"rgba(200, 200, 200, 1)"},selected:{backgroundColor:"rgba(184,0,0,1)",borderColor:"rgba(255,255,255,1)"}},data:[],event:{multiSelect:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tooltip:{show:!1,offsets:{top:5,left:12}},legend:{show:!1},style:{gradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"rgb(255,255,0)",1:"rgb(255,0,0)"},normal:{radius:15,minOpacity:0,maxOpacity:1,minValue:0,maxValue:0,minScope:0,maxScope:1}},data:[],event:{multiSelect:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tooltip:{show:!0,position:"top",formatter:"{count}",offsets:{top:5,left:12}},legend:{show:!0,title:"图例"},style:{colors:["rgba(31,98,1,1)","rgba(95,154,4,1)","rgba(139,227,7,1)","rgba(218,134,9,1)","rgba(220,54,6,1)","rgba(218,2,8,1)","rgba(148,1,2,1)","rgba(92,1,0,1)"],normal:{backgroundColor:"rgba(200, 200, 200, 0.5)",padding:1,size:50,label:{show:!1,font:"12px sans-serif",shadowBlur:0,lineWidth:1,color:"rgba(75,80,86,1)"}},mouseOver:{backgroundColor:"rgba(200, 200, 200, 1)"},selected:{backgroundColor:"rgba(184,0,0,1)",borderColor:"rgba(255,255,255,1)"}},data:[],event:{multiSelect:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tooltip:{show:!0,position:"top",customClass:"inmap-tooltip-black",offsets:{top:5,left:12},formatter:"{count}"},legend:{show:!1},style:{normal:{icon:null,width:0,height:0,offsets:{top:0,left:0}},mouseOver:{},selected:{},colors:[],splitList:[]},data:[],event:{multiSelect:!1,onMouseClick:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={center:[],id:null,skin:null,zoom:{value:5,show:!0,max:18,min:5}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={style:{normal:{markerRadius:3,markerColor:"#fff",lineType:"solid",lineWidth:1,colors:["#F9815C","#F8AB60","#EDCC72","#E2F194","#94E08A","#4ECDA5"],moveRadius:2,fillColor:"#fff",shadowColor:"#fff",shadowBlur:5,fps:30,skin:null}},data:[]}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoveLineOverlay=t.ImgOverlay=t.workerMrg=t.HoneycombOverlay=t.CircuitOverlay=t.HeatOverlay=t.BoundaryOverlay=t.GriddingOverlay=t.DotOverlay=t.Map=t.utils=void 0;var i=n(15),r=n(16),o=n(13),a=n(17),s=n(14),l=n(18),u=n(19),c=n(20),h=n(12),f=n(0),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=n(8),y={utils:p,Map:h.Map,DotOverlay:i.DotOverlay,GriddingOverlay:r.GriddingOverlay,BoundaryOverlay:o.BoundaryOverlay,HeatOverlay:a.HeatOverlay,CircuitOverlay:s.CircuitOverlay,HoneycombOverlay:l.HoneycombOverlay,workerMrg:d.workerMrg,ImgOverlay:u.ImgOverlay,MoveLineOverlay:c.MoveLineOverlay};t.utils=p,t.Map=h.Map,t.DotOverlay=i.DotOverlay,t.GriddingOverlay=r.GriddingOverlay,t.BoundaryOverlay=o.BoundaryOverlay,t.HeatOverlay=a.HeatOverlay,t.CircuitOverlay=s.CircuitOverlay,t.HoneycombOverlay=l.HoneycombOverlay,t.workerMrg=d.workerMrg,t.ImgOverlay=u.ImgOverlay,t.MoveLineOverlay=c.MoveLineOverlay,t.default=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.MapZoom=function(){function e(t){i(this,e),this.map=t,this.dom=t._inmapOption.toolDom,this.zoom=t._inmapOption.zoom,this.createDom()}return r(e,[{key:"createDom",value:function(){var e=document.createElement("div");e.classList.add("inmap-scale-group"),e.innerHTML="<a>+</a > <a>-</a >",this.dom.appendChild(e),this.event(e)}},{key:"event",value:function(e){var t=this,n=e.querySelectorAll("a");n[0].addEventListener("click",function(){t.map.getZoom()<t.zoom.max&&t.map.zoomIn()}),n[1].addEventListener("click",function(){t.map.getZoom()>t.zoom.min&&t.map.zoomOut()})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=function(){function e(t){i(this,e),this.setOption(t),this.intervalId=null,this.splitArray=[],this.index=0}return r(e,[{key:"setOption",value:function(e){var t=e.interval,n=void 0===t?400:t,i=e.splitCount,r=void 0===i?1500:i;this.clear(),this.interval=n,this.splitCount=r}},{key:"clear",value:function(){this.intervalId&&clearInterval(this.intervalId),this.splitArray=[],this.index=0}},{key:"action",value:function(e,t,n){var i=this;this.clear();var r=this.splitCount,a=this.interval;this.splitArray=(0,o.chunk)(e,r);!function e(){var r=i.splitArray[i.index];r&&t(n,r),i.index++,i.index>=i.splitArray.length-1?i.clear():i.intervalId=setTimeout(e,a)}()}}]),e}();t.default=a},,function(e,t,n){t=e.exports=n(44)(),t.push([e.i,'.inmap-container {\n  opacity: 1;\n  font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, Arial, sans-serif;\n}\n.inmap-container,\n.inmap-container *:after,\n.inmap-container *:before {\n  display: -webkit-box;\n}\n.inmap-scale-group {\n  position: absolute;\n  right: 10px;\n  bottom: 35px;\n  z-index: 999999;\n  opacity: 1;\n}\n.inmap-scale-group > a {\n  display: block;\n  width: 24px;\n  height: 24px;\n  font-size: 17px;\n  line-height: 22px;\n  text-align: center;\n  background: #fff;\n  margin-top: 5px;\n  color: #666;\n  cursor: pointer;\n  text-decoration: none;\n}\n.inmap-tooltip {\n  position: absolute;\n  opacity: 1;\n  display: none;\n  pointer-events: none;\n  border-style: solid;\n  white-space: nowrap;\n  z-index: 9999999;\n  transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n  border-radius: 4px;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  font-size: 14px;\n  font-family: sans-serif;\n  line-height: 21px;\n  padding: 5px;\n  left: 323px;\n  top: 451px;\n}\n.inmap-tooltip-black {\n  border-width: 0px;\n  border-color: #333333;\n  background-color: rgba(50, 50, 50, 0.7);\n  color: #ffffff;\n}\n.inmap-legend {\n  position: absolute;\n  list-style: none;\n  opacity: 1;\n  height: auto;\n  font-size: 12px;\n  left: 35px;\n  bottom: 35px;\n  text-align: center;\n  border: 10px solid rgba(255, 255, 255, 0.7);\n  box-shadow: rgba(8, 16, 34, 0.3) 2px 0px 7px;\n  border-radius: 5px;\n  z-index: 9999;\n}\n.inmap-legend .inmap-legend-title {\n  background-color: rgba(255, 255, 255, 0.7);\n  padding-bottom: 3px;\n}\n.inmap-legend > table {\n  width: 100%;\n}\n.inmap-legend table,\n.inmap-legend table tbody,\n.inmap-legend table tr,\n.inmap-legend table tr td {\n  padding: 0;\n  border: 0;\n  margin: 0;\n}\n.inmap-legend .inmap-chunk {\n  display: inline-block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 14px;\n}\n.inmap-legend .inmap-legend-text {\n  background-color: rgba(255, 255, 255, 0.7);\n  padding-left: 5px;\n  text-align: left;\n  font-size: 12px;\n}\n.inmap-legend .inmap-infinity {\n  top: 4px;\n  left: 7px;\n  position: relative;\n}\n.inmap-legend .inmap-infinity:before,\n.inmap-legend .inmap-infinity:after {\n  content: "";\n  box-sizing: border-box;\n  width: 6px;\n  height: 6px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  border: 1px solid #495060;\n  -moz-border-radius: 50px 50px 0;\n  border-radius: 50px 50px 0 50px;\n  -webkit-transform: rotate(128deg);\n  -moz-transform: rotate(128deg);\n  -ms-transform: rotate(128deg);\n  -o-transform: rotate(128deg);\n  transform: rotate(128deg);\n}\n.inmap-legend .inmap-infinity:after {\n  left: auto;\n  right: 0;\n  -moz-border-radius: 50px 50px 50px 0;\n  border-radius: 50px 50px 50px 0;\n  -webkit-transform: rotate(-128deg);\n  -moz-transform: rotate(-128deg);\n  -ms-transform: rotate(-128deg);\n  -o-transform: rotate(-128deg);\n  transform: rotate(-128deg);\n}\n',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=f[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(l(i.parts[o],t))}else{for(var a=[],o=0;o<i.parts.length;o++)a.push(l(i.parts[o],t));f[i.id]={id:i.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],a=r[1],s=r[2],l=r[3],u={css:a,media:s,sourceMap:l};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function r(e,t){var n=y(),i=g[g.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function l(e,t){var n,i,r;if(t.singleton){var l=m++;n=v||(v=a(t)),i=u.bind(null,n,l,!1),r=u.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),i=h.bind(null,n),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),i=c.bind(null,n),r=function(){o(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function u(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function c(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var f={},p=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},d=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),y=p(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,m=0,g=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},void 0===t.singleton&&(t.singleton=d()),void 0===t.insertAt&&(t.insertAt="bottom");var r=i(e);return n(r,t),function(e){for(var o=[],a=0;a<r.length;a++){var s=r[a],l=f[s.id];l.refs--,o.push(l)}if(e){n(i(e),t)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var i=n(43);"string"==typeof i&&(i=[[e.i,i,""]]);n(45)(i,{});i.locals&&(e.exports=i.locals)}])});