define(["Moooer"],function(t){!function(o){var a={onLoadImage:function(a){var n,a=t.fixFunction(a);return n="IMG"==this.prop("nodeName")?this:this.find("img"),n.each(function(){function t(){a.apply(n)}var n=o(this),r=n.get(0);r.complete&&null!=n.attr("src")&&n.attr("src").length>1?t():(n.attr("src",n.attr("img")||n.attr("src")),n.load(t))})},loadAllImages:function(a,n,r){var e,a=t.fixFunction(a),n=t.fixFunction(n),r=t.fixFunction(r);e="IMG"==this.prop("nodeName")?this:this.find("img");var i=e.length,s=0;
return i>0&&a(),e.each(function(){function t(){s++,n.apply(a,[s,i]),s>=i&&r()}var a=o(this),e=a.get(0);e.complete&&null!=a.attr("src")&&a.attr("src").length>1?t():(a.attr("src",a.attr("img")||a.attr("src")),a.load(t))}),e},autoLoadImages:function(a,n){var r,a=t.fixFunction(a),e=t.fixFunction(n);return r="IMG"==this.prop("nodeName")?this:this.find("img"),r.each(function(){function t(){e.apply(i)}function n(){i.attr("src",i.data("src")),i.data("src",""),clearInterval(i.data("iv")),a.apply(i),s.complete?t():i.load(t)
}function r(){pos=i.offset(),wh=o(window).height(),ww=o(window).width(),st=o(window).scrollTop(),sl=o(window).scrollLeft(),pos.top-st<wh&&pos.left-sl<ww&&n()}var i=o(this),s=i.get(0);i.data("src",i.attr("img")||i.attr("src")),i.data("iv",setInterval(r,100))}),r}};o.fn.moooer_imageLoader=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void o.error("Method "+t+" does not exist on jQuery.moooer_imageLoader"):a.init.apply(this,arguments)}}(Zepto);
var o={};return o.autoLoadImages=function(t,o,a){return $(t).moooer_imageLoader("autoLoadImages",o,a)},o.loadAllImages=function(t,o,a,n){return $(t).moooer_imageLoader("loadAllImages",o,a,n)},o.onLoadImage=function(t,o){return $(t).moooer_imageLoader("onLoadImage",o)},o});