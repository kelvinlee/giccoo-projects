@import sass/base

$debug : false
$cdn : "../"
@if not $debug
	$cdn : "//image.giccoo.com/projects/df-5008/"

// animation, delay, duration
@for $i from 1 through 51
	.delay-#{$i}
		animation-delay: $i*100ms
	.duration-#{$i}
		animation-duration: $i*100ms
$fontColor: #ffffff;
$pageMainBGColor: #ffffff;


+keyframes(second)
	0%
		transform: rotate(0deg)
	100%
		transform: rotate(360deg)
+keyframes(fadeShow)
	0%,40%,80%,100%
		opacity: 1
	20%,60%
		opacity: 0.7
+keyframes(fly)
	0%,100%
		+transform(translate3d(0,0,0))
	50%
		+transform(translate3d(0,-10px,0))
+keyframes(fadeZoom)
	0%
		opacity: 1
		+transform(scale(0,0))
	60%
		+transform(scale(3,3))
		opacity: 0
	100%
		opacity: 0
+keyframes(fadeTxt)
	0%,100%
		opacity: 1
	50%
		opacity: 0.75
+keyframes(moveErr)
	0%,100%
		+transform(translate3d(0,0,0) scale(1,1))
	50%
		+transform(translate3d(-10px,0,0) scale(1,1))
	51%
		+transform(translate3d(-10px,0,0) scale(-1,1))
	80%
		+transform(translate3d(0,0,0) scale(-1,1))
	81%
		+transform(translate3d(0,0,0) scale(1,1))
+keyframes(jumpErr)
	0%,13%,100%
		+transform(translate3d(0,0,0) scale(1,1))
	10%,11%
		+transform(translate3d(0,-10px,0) scale(1.01,1.01))
+keyframes(next)
	0%
		opacity: 1
		+transform(translate3d(0,-50%,0))
	10%
		opacity: 1
		+transform(translate3d(0,-50%,0))
	60%
		opacity: 1
	100%
		opacity: 0
		+transform(translate3d(-20%,-50%,0))


html,body
	+w
	+h

body
	color: $fontColor
	+bc($pageMainBGColor)
video,canvas
	+w
	+h(auto)
body
	+overhide

.wechat-share-hide,.load-before
	+posa
	+tl(-1000px)
	+hide
	+w(1px)
	+h(1px)

.playsound
	+posa
	+tr(0.5rem,2%)
	+iw(58)
	z-index: 99
	font-size: 0
	.play
		+animation(second,4s,ease,infinite)

.hide
	display: none

.main
	+w
	+h
	+posr
	+overhide
	+bc(#fff)
	&.rotate90
		+transform(rotate(90deg) translate3d(0,-100%,0))
		transform-origin: top left
				
				
.page-animation-enter-active
	transition: all .4s linear
.page-animation-leave-active
	transition: all .4s linear
	transform: translate3d(0,0,0)
.page-animation-enter
	transform: translate3d(-100%,0,0)
	& ~ .page-animation-leave
		transform: translate3d(100%,0,0)
.page-animation-leave
	transform: translate3d(100%,0,0)
	& ~ .page-animation-enter
		transform: translate3d(100%,0,0)
.page-animation-enter-to
	transform: translate3d(0,0,0)
	& ~ .page-animation-leave-to
		transform: translate3d(100%,0,0)
.page-animation-leave-to
	transform: translate3d(-100%,0,0)


.page-fade-enter-active
	transition: all .6s ease
	opacity: 1
.page-fade-leave-active
	transition: all .3s linear
	opacity: 1
.page-fade-enter,.page-fade-leave-to
	opacity: 0


.f0
	font-size: 0

.pages
	+w
	+h
	+posr
	+overhide
	perspective: 500
	-webkit-perspective: 500
			transform-style: preserve-3d
	-webkit-transform-style: preserve-3d
	.page
		+posa
		+tl
		+w
		+h
		+bc(#e3dbd5)
		+hide
		background-attachment: fixed
		z-index: 10
		.arrow
			+posf
			+bl(2%,50%)
			+transform(translateX(-50%))
			+w(20px)
			+h(20px)
			margin-left: -10px
			font-size: 0
			+b($cdn+"img/arrow-black.png",no-repeat,center,center, contain)
			+animation(arrow,2.5s,ease,infinite)
			z-index: 109
			&.right
				+bl(auto,auto)
				+tr(50%,2%)
				+animation(arrow-right,2.5s,ease,infinite)
			&.top
				+bl(auto,auto)
				+tr(2%,50%)
				margin-right: -20px
				+animation(arrow-top,2.5s,ease,infinite)
				// animation: none
			// +bc(#000)
		.bg
			+posa
			+tl
			+w
			+h
			z-index: -1
			img
				+w
				+h
		&.on
			z-index: 20
			+show
			& + .page
				+show
				& + .page
					+show
		&.overhide
			+overhide
		&.touch
			overflow: scroll
		@for $i from 1 through 30
			&.page-#{$i}
				z-index: 20-$i
.page
	+posa
	+tl
	+w
	+h
	+overhide
	+b("../img/bg-repeat.jpg",repeat,top,center)
	background-size: 100% auto
	.bg
		+posa
		+bl
		font-size: 0

.page-last
	.bg
		+posa
		+bl(50%)
		+transform(translate3d(0,50%,0))
		.item
			+posa
			+bl
			font-size: 0
.err-1
	+animation(fadeShow,3s,ease,infinite)
	.body
		+animation(moveErr,4s,ease,infinite)
.err-2
	+posr
	.body
		// +animation(fadeShow,5s,ease,infinite)
		// animation-delay: 1500ms
	.red
		$size: 30%
		+w($size)
		padding-top: $size
		+b("../img/red.png",no-repeat,center,center,cover)
		+posa
		+animation(fadeZoom,2s,ease,infinite)
	.red-1
		+tl(5%,40%)
	.red-2
		+tr(25%,2%)
		animation-delay: 300ms
	.red-3
		+tl(35%,2%)
		animation-delay: 600ms
	.red-4
		+bl(15%,15%)
		animation-delay: 900ms

.err-3
	+animation(fly,4s,ease,infinite)
	.sc
		+animation(fadeShow,4s,ease,infinite)
		animation-delay: 500ms
.page-home
	.title
		+iw(740,1500,100%)
		+posa
		+tl(0,50%)
		+transform(translate3d(-50%,0,0))
	.text
		+iw(534,1500,100%)
		+posa
		+bl(2%,50%)
		+transform(translate3d(-50%,0,0))
		+animation(fadeTxt,2s,ease,infinite)
	.err-1,.err-2,.err-3
		+posa
		+bl()
		font-size: 0
	.err-1
		+iw(330,1500,100%)
		+bl(8%,60%)
	.err-2
		+iw(291,1500,100%)
		+bl(31.7%,46%)
	.err-3
		+iw(313,1500,100%)
		+bl(18%,25%)
.page-room
	font-size: 0
	z-index: 1
	.learnmore-btn
		+iw(687,1500,100%)
		+posa
		+tr(5%,10%)
		+b("../img/learnmore-bg.png",no-repeat,center,center,cover)
		.body.on
			+animation(tada,1s,ease)
.page
	.next
		+iw(145,1500,100%)
		+posa
		+tr(60%,10%)
		+transform(translate3d(0,-50%,0))
		+animation(next,2s,ease,infinite)

#room-1
	.err-1
		+posa
		+bl(26%,37%)
		+iw(280,1500,100%)
	.stun
		+posa
		+bl(51.2%,25.4%)
		+iw(93,1500,100%)
	.message-pop
		+posa
		+bl(55%,6%)
		+iw(469,1500,100%)
#room-2
	.err-2
		+posa
		+bl(34%,47%)
		+iw(220,1500,100%)
		+transform(scale(-1,1))
	.message-pop
		+posa
		+bl(57%,12%)
		+iw(469,1500,100%)
#room-3
	.err-3
		+posa
		+bl(30%,49%)
		+iw(250,1500,100%)
		.sc
			+transform(scale(-1,1))
	.message-pop
		+posa
		+bl(53%,18%)
		+iw(365,1500,100%)
	.next
		+iw(225,1500,100%)
		right: 6%


.pop-box
	+b(none)
	+bc(rgba(0,0,0,0.75))
	z-index: 9998
	+posa
	+tl
	+w
	+h
	+overhide
	+transform(translate3d(0,0,0))
	.pop-content
		+posr
		+w(70%)
		margin-left: 15%
		.more
			+posa
			+br
			+wh(50%,40%)

	.close
		+posa
		+tr(10%,9%)
		+w(7%)
