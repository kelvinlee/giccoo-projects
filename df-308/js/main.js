"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ANIMATION_END_NAME,ANIMATION_END_NAMES,AnimatedSprite,Container,Graphics,IsPC,ParticleContainer,Sprite,TRANSITION_END_NAME,TRANSITION_END_NAMES,Text,Texture,TextureCache,TrueH,TrueW,UGC,VENDORS,_cache,_public,_runTime,_second,_startCache,_testTime,apiLink,apiUrl,autoDetectRenderer,createObjectURLfun,css3Prefix,getId,getOrientation,getTe,i,imageurl,init,j,len1,loadWechatConfig,loader,loading,mTestElement,main,musicIconCache,musicLineCache,neteaseShareImage,playAudio,random,resource,resources,sended,stopAllAudio,sys,ugc,ugcCache;for(VENDORS=["Moz","webkit","ms","O"],TRANSITION_END_NAMES={Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"},ANIMATION_END_NAMES={Moz:"animationend",webkit:"webkitAnimationEnd",ms:"MSAnimationEnd",O:"oAnimationEnd"},mTestElement=document.createElement("div"),j=0,len1=VENDORS.length;j<len1&&(i=VENDORS[j],!((css3Prefix=i)+"Transition"in mTestElement.style));j++)css3Prefix=!1;css3Prefix&&(TRANSITION_END_NAME=TRANSITION_END_NAMES[css3Prefix],ANIMATION_END_NAME=ANIMATION_END_NAMES[css3Prefix]),loadWechatConfig=function e(){var t,n,i;i=encodeURIComponent(window.location.href.split("#")[0]),t=document.createElement("script"),t.src="//api.giccoo.com/api/config?url="+i,n=document.getElementsByTagName("script")[0],n.parentNode.insertBefore(t,n)},IsPC=function e(){var t,n,i,o;for(i=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,o=0;o<t.length;){if(i.indexOf(t[o])>0){n=!1;break}o++}return n},Vue.component("player",{template:'<div class="player" :class="{play: playing, pause: !playing}" @click="change"> <div class="icon-play" :class="{play: playing, pause: !playing}"> <svg v-if="!icon" v-show="!playing" height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-id-39"></use><path class="ytp-svg-fill" d="M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z"></path></svg> <svg v-if="!icon" v-show="playing" height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use class="ytp-svg-shadow" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ytp-id-40"></use><path class="ytp-svg-fill" d="M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z"></path></svg> </div> <audio :src="src" :autoplay="autoplay" :preload="preload" :loop="loop"></audio> <img v-if="thumb" :src="thumb" /> </div>',data:function e(){return{playing:!1,stoped:!1}},props:{name:{default:!1},src:{default:"./mp3/bgm.mp3"},thumb:{default:!1},autoplay:{default:!1},preload:{default:!1},loop:{default:!1},callback:{default:!1},icon:{default:!1}},methods:{play:function e(){var t;return t=this.$emit("play",this),this.playing=!0},pause:function e(){var t;return t=this.$emit("pause",this),this.audio.pause(),this.playing=!1},ended:function e(){return this.playing=!1},change:function e(){return this.playing?(this.audio.pause(),this.stoped=!0):(this.audio.play(),this.stoped=!1,"undefined"!=typeof _hmt&&null!==_hmt&&_hmt.push(["_trackEvent","adidas-originals-eqt",this.name,"play","-"]))}},mounted:function e(t){return console.log(this.name),this.audio=this.$el.children[1],this.audio.addEventListener("pause",this.pause.bind(this)),this.audio.addEventListener("play",this.play.bind(this)),this.audio.addEventListener("ended",this.ended.bind(this))}}),Container=PIXI.Container,ParticleContainer=PIXI.ParticleContainer,autoDetectRenderer=PIXI.autoDetectRenderer,loader=PIXI.loader,resources=PIXI.loader.resources,TextureCache=PIXI.utils.TextureCache,Texture=PIXI.Texture,Sprite=PIXI.Sprite,Graphics=PIXI.Graphics,resource=PIXI.loader.resources,Text=PIXI.Text,AnimatedSprite=PIXI.extras.AnimatedSprite,getTe=function e(t){return resource[t].texture},getId=function e(t,n){return loader.resources[n].textures[t]},null==Number.isInteger&&(Number.isInteger=function(e){return e>=0}),random=1+parseInt(5*Math.random()),UGC=function(){var e=function(){function e(t){_classCallCheck(this,e),this.opts={el:"main",w:750,h:1314,trueH:1314,count:6,speed:1,alpha:.8,defaultShow:!0,class:"",fillColor:6737151},this.opts=Object.assign(this.opts,t),this.default.h=document.documentElement.clientHeight,this.default.w=document.documentElement.clientWidth,this.default.ratio=this.opts.w/this.default.w,this.app=new PIXI.Application({width:this.opts.w,height:this.opts.h,transparent:!0,preserveDrawingBuffer:!0,forceCanvas:!0}),null!=this.opts.class&&""!==this.opts.class&&(this.app.view.className=this.opts.class),this.stage=this.app.stage,document.getElementById(this.opts.el).appendChild(this.app.view),console.log("imageList:",imageList.length),PIXI.loader.add(imageList).use(this.loaditem.bind(this)).load(buildUGC.bind(this)),this.default.MH=.65*this.opts.h}return _createClass(e,[{key:"loaditem",value:function e(){if(this.loadNumber++,loading.progressOn=parseInt(this.loadNumber/imageList.length*100),this.loadNumber===imageList.length)return buildUGC.bind(this).call()}}]),e}();return e.prototype.builded=!1,e.prototype.default={w:320,h:160,running:!0},e.prototype.started=!1,e.prototype.over=!1,e.prototype.online=!1,e.prototype.blocks=[],e.prototype.bottles=[],e.prototype.enemys=[],e.prototype.lights=[],e.prototype._progress=0,e.prototype.lineMoving=!1,e.prototype.startTime=null,e.prototype.loadNumber=0,e}.call(void 0),String.prototype.gblen=function(){var e,t,n;for(t=0,i=e=0,n=this.length;0<=n?e<n:e>n;i=0<=n?++e:--e)this.charCodeAt(i)>127||94===this.charCodeAt(i)?t+=2:t++;return t},TrueW=640,TrueH=1138,imageurl="//api.giccoo.com/api/upload/image64/",apiUrl="//api.giccoo.com/Levi",apiLink="//g.giccoo.com/",main={},ugc=null,_public={},loading={},musicLineCache=null,musicIconCache=null,sys="",ugcCache=null,sended=[!1,!1],_cache=null,_startCache=null,_runTime=null,_second=0,_testTime=0,neteaseShareImage=function e(){var t,n,i;return i="有故事的声活单曲",t="https://image.giccoo.com/upload/"+main.folder+"/"+main.shareImageLink+"@!large",n="https://m.giccoo.com/lancomeGEN/",window.location.href="orpheus://sharepic?picUrl="+encodeURIComponent(t)+"&shareUrl="+encodeURIComponent(n)+"&wbDesc="+encodeURIComponent(i)+"&qqDesc="+encodeURIComponent(i),console.log("share href:",t)},createObjectURLfun=function e(t){return null!=window.webkitURL||window.navigator.userAgent.indexOf("Chrome")>=1||window.navigator.userAgent.indexOf("Safari")>=1?window.webkitURL.createObjectURL(t):window.URL.createObjectURL(t)},getOrientation=function e(t,n){var o;o=new FileReader,o.onload=function(e){var t,o,a,r,s,u;if(u=new DataView(e.target.result),65496!==u.getUint16(0,!1))return n(-2);for(t=u.byteLength,r=2;r<t;){if(u.getUint16(r+2,!1)<=8)return n(-1);if(a=u.getUint16(r,!1),r+=2,65505===a){if(1165519206!==u.getUint32(r+=2,!1))return n(-1);for(o=18761===u.getUint16(r+=6,!1),r+=u.getUint32(r+4,o),s=u.getUint16(r,o),r+=2,i=0;i<s;){if(274===u.getUint16(r+12*i,o))return n(u.getUint16(r+12*i+8,o));i++}}else{if(65280!=(65280&a))break;r+=u.getUint16(r,!1)}}return n(-1)},o.readAsArrayBuffer(t)},window.onload=function(){var e;return TrueH=document.documentElement.clientHeight,TrueW=document.documentElement.clientWidth,IsPC()?(document.getElementById("qrcode").className+=" show",!1):(e=0,window.navigator.userAgent.indexOf("NeteaseMusic")>-1?sys="NeteaseMusic":(loadWechatConfig(),wx.ready(function(){var e;return e={title:"自信心声，因我而生",desc:"渴望拥有外在的光芒，就更应该聆听自己内心的身音",link:"http://m.giccoo.com/lancomeGEN/",imgUrl:"http://m.giccoo.com/lancomeGEN/img/ico.jpg",success:function e(){},cancel:function e(){}},wx.onMenuShareTimeline(e),wx.onMenuShareAppMessage(e),wx.onMenuShareQQ(e),wx.onMenuShareWeibo(e)})),_public=new Vue({el:"#public",data:{note:!0,playing:!1}}),loading=new Vue({el:"#loading",data:{progress:0,mounted:!1,progressOn:0},methods:{next:function e(){return document.getElementById("load").className+=" fadeOut animated",_public.note=!1,setTimeout(function(){return document.getElementById("load").style.display="none"},520)}},mounted:function e(){var t=this,n;return this.mounted=!0,TrueH=document.documentElement.clientHeight,TrueW=document.documentElement.clientWidth,n=setInterval(function(){if(t.progress+=2,t.progress>=t.progressOn&&(t.progress=t.progressOn),t.progress>=100)return t.progress=100,clearInterval(n),main.mounted=!0,_cache=setTimeout(function(){return t.next()},200)},50)}}),init())},init=function e(){var t,n;return TrueW>=640&&(TrueW=640),TrueH>=1138&&(TrueH=1138),n=2*TrueH<1200,t=Math.ceil(TrueW/640*94/TrueH*100),console.log(TrueW,TrueH),main=new Vue({el:"#main",data:{w:TrueW,h:TrueH,biger:TrueW/TrueH<.55,smaller:n,afterH:n?1.15*TrueH-TrueW/750*1029:TrueH-TrueW/750*1029,wy:!1,mounted:!0,loading:!1,lotteryShow:!1,pageInfoShow:!1,pageIndex:2,step:1,singerIndex:1,startgame:!1,folder:"",BGColor:"#ffffff",XY:"pageY",ugc:null,ugcsave:null,ugcold:null,pushed:!1,shareImageLink:null,cache:null,audioId:null,v:null,recordStarting:!1,authorization:!1,norecord:!0,uploaded:!1,imageUpdate:!1,allowPopShow:!1,count:0,form:{link:null},mask:1,text:"",nickname:"",musicLink:"",logId:"",openBtnShow:!0,default:{x:0},videoPop:!1,canUpload:!0,handCover:!1,last_update:0,lastX:0,lastY:0,lastZ:0,speed:4e3,maxSpeed:0,swing:!1},methods:{showAnswerPage:function e(){return this.pageIndex=2,_public.playing||(_public.playing=!0),setTimeout(function(){return setup()},300)},openPop:function e(){return this.lotteryShow=!0},openWeb:function e(){return console.log("open web"),window.location.href="https://www.lancome.com.cn/landingpage/advanced-genifique?utm_source=NeteaseMusic&utm_medium=DISP&utm_content=06-02NeteaseMusic_H5&utm_campaign=CN_20180803_GEN1+1_LPD_LAN_FS_Regular_NVD_DISP_MO"},sharePost:function e(){return ugc.app.renderer.render(ugc.app.stage),this.ugc=ugc.app.view.toDataURL(),setLottery()},share:function e(){var t,n,i;return i=this.ugc,n="lancomeGEN",t={image:i,folder:n},this.folder=n,null==i?this.faild():!this.pushed&&axios.post(imageurl,t).then(function(e){return 200===e.data.recode?main.success(e.data):main.faild(e)}).catch(function(e){return main.faild(e)})},success:function e(t){return this.shareImageLink=t.info,this.pushed=!1,this.loading=!1,neteaseShareImage()},faild:function e(t){return this.pushed=!1,this.loading=!1,console.log("err:",t)},setugc:function e(t){return this.ugc=t},pageHand:function e(){var t=this;return this.pageIndex=3,setTimeout(function(){return t.swing=!0},300),setTimeout(function(){return finishAll()},700)},deviceMotionHandler:function e(t){var n,i,o,a,r,s,u;return!!this.swing&&(n=t.accelerationIncludingGravity,i=(new Date).getTime(),i-this.last_update>10?(o=i-this.last_update,this.last_update=i,r=n.x,s=n.y,u=n.z,a=Math.sqrt((r-this.lastX)*(r-this.lastX)+(s-this.lastY)*(s-this.lastY)+(u-this.lastZ)*(u-this.lastZ))/o*1e4,a>this.speed&&(this.maxSpeed+=1,this.maxSpeed>=10&&(this.swing=!1,this.nextPage())),this.lastX=r,this.lastY=s,this.lastZ=u):void 0)},nextPage:function e(){return console.log("next page run"),this.pageIndex=2}},mounted:function e(){var t,n;return TrueH=document.documentElement.clientHeight,TrueW=document.documentElement.clientWidth,"NeteaseMusic"===sys&&(this.wy=!0),t=2*TrueH*(2-2*TrueW/750+.01),ugc=new UGC({el:"ugc",w:640,h:640/TrueW*TrueH}),n=CloudMusic.getClientVersion().split("."),window.DeviceMotionEvent?(window.addEventListener("devicemotion",this.deviceMotionHandler.bind(this),!1),this.handCover=!1,console.log("devicemotion")):this.handCover=!0}})},playAudio=function e(t){var n;return n=document.getElementById(t),console.log("play "+t,n,n.play()),n.play(),n.addEventListener("ended",function(){return stopAllAudio(),hideAnswer()},!1)},stopAllAudio=function e(){var t,n,i,o,a;for(a=[],i=0,o=musicA.length;i<o;i++)n=musicA[i],t=document.getElementById(n[0]),t.pause(),t=document.getElementById(n[1]),a.push(t.pause());return a};