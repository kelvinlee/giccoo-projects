<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>有故事的声活单曲</title>
    <meta name="author" content="m.giccoo.com">
    <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="css/base.css">
    <script src="/libs/js/min/vconsole.min.js"></script>
    <script>
      var vConsole = new VConsole();
      console.log('VConsole open');
      
    </script>
  </head>
  <body>
    <div id="qrcode" class="qrcode">
      <div class="qr"><img src="./img/qrcode.png">
        <div class="text">请使用手机扫描二维码参与活动</div>
      </div>
    </div>
    <div id="load" class="load">
      <div id="loading" v-show="mounted" style="display: none" class="loading fadeIn animated">
        <div style="height: 2rem" class="music-box"></div>
        <div style="height: 3rem" class="music-box"></div>
        <div style="height: 4rem" class="music-box"></div>
        <div style="height: 6rem" class="music-box"></div>
        <div style="height: 9rem" class="music-box"></div>
        <div style="height: 15rem" class="music-box"></div>
        <div style="height: 13rem" class="music-box"></div>
        <div style="height: 17rem" class="music-box"></div>
        <div style="height: 14rem" class="music-box"></div>
        <div style="height: 10rem" class="music-box"></div>
        <div style="height: 16rem" class="music-box"></div>
        <div style="height: 9rem" class="music-box"></div>
        <div style="height: 6rem" class="music-box"></div>
        <div style="height: 4rem" class="music-box"></div>
        <div style="height: 2rem" class="music-box"></div>
        <div class="text fadeIn animated"><img src="./img/loading-text.png"></div>
        <div v-show="progress &gt; 80" @click="openMusic" class="open">打开声音</div>
        <audio id="bgm" src="./mp3/bgm.mp3"></audio>
      </div>
    </div>
    <div id="main" v-show="mounted" :class="{biger: biger,smaller:smaller}" style="display: none" :style="{width: w+'px',height: h+'px'}" class="main">
      <transition name="page-fade">
        <div v-show="loading" class="loading-page">
          <div class="ball-spin-fade-loader">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </transition>
      <transition name="page-fade">
        <div v-show="pageIndex == 1" class="page page-1">
          <div class="content">
            <div class="text-box text-1">
              <div class="box">
                <div style="height: 1rem" class="music-box"></div>
                <div style="height: 2rem" class="music-box"></div>
                <div style="height: 3rem" class="music-box"></div>
                <div style="height: 5rem" class="music-box"></div>
                <div style="height: 7rem" class="music-box"></div>
                <div style="height: 12rem" class="music-box"></div>
                <div style="height: 10rem" class="music-box"></div>
                <div style="height: 13rem" class="music-box"></div>
                <div style="height: 11rem" class="music-box"></div>
                <div style="height: 8rem" class="music-box"></div>
                <div style="height: 12rem" class="music-box"></div>
                <div style="height: 9rem" class="music-box"></div>
                <div style="height: 5rem" class="music-box"></div>
                <div style="height: 3rem" class="music-box"></div>
                <div style="height: 1rem" class="music-box"></div>
              </div>
              <div class="text"><img src="./img/page-1-1.png"></div>
            </div>
            <div class="text-box text-2">
              <div class="box">
                <div style="height: 1rem" class="music-box"></div>
                <div style="height: 2rem" class="music-box"></div>
                <div style="height: 3rem" class="music-box"></div>
                <div style="height: 5rem" class="music-box"></div>
                <div style="height: 7rem" class="music-box"></div>
                <div style="height: 12rem" class="music-box"></div>
                <div style="height: 10rem" class="music-box"></div>
                <div style="height: 13rem" class="music-box"></div>
                <div style="height: 11rem" class="music-box"></div>
                <div style="height: 8rem" class="music-box"></div>
                <div style="height: 12rem" class="music-box"></div>
                <div style="height: 9rem" class="music-box"></div>
                <div style="height: 5rem" class="music-box"></div>
                <div style="height: 3rem" class="music-box"></div>
                <div style="height: 1rem" class="music-box"></div>
              </div>
              <div class="text"><img src="./img/page-1-2.png"></div>
            </div>
            <div class="text-box text-3">
              <div class="box">
                <div style="height: 1rem" class="music-box"></div>
                <div style="height: 2rem" class="music-box"></div>
                <div style="height: 3rem" class="music-box"></div>
                <div style="height: 5rem" class="music-box"></div>
                <div style="height: 7rem" class="music-box"></div>
                <div style="height: 12rem" class="music-box"></div>
                <div style="height: 10rem" class="music-box"></div>
                <div style="height: 13rem" class="music-box"></div>
                <div style="height: 11rem" class="music-box"></div>
                <div style="height: 8rem" class="music-box"></div>
                <div style="height: 12rem" class="music-box"></div>
                <div style="height: 9rem" class="music-box"></div>
                <div style="height: 5rem" class="music-box"></div>
                <div style="height: 3rem" class="music-box"></div>
                <div style="height: 1rem" class="music-box"></div>
              </div>
              <div class="text"><img src="./img/page-1-3.png"></div>
            </div>
          </div>
        </div>
      </transition>
      <transition name="page-fade">
        <div v-show="pageIndex == 2" class="page page-2">
          <div class="content">
            <div class="head"><img src="./img/homepage-bg.jpg">
              <div class="watch-ad"><img src="./img/homepage-watch-ad.png"></div>
            </div>
            <div :style="{height: afterH+'px'}" class="after">
              <div @click="startbuild" class="btn"><img src="./img/homepage-next.png"></div>
              <div class="logo"><img src="./img/homepage-logo.png"></div>
            </div>
          </div>
        </div>
      </transition>
      <transition name="page-fade">
        <div v-show="pageIndex == 3" class="page page-3">
          <div class="content">
            <div id="ugc"><img :src="ugcold"></div>
            <transition name="page-fade">
              <div v-show="step == 1" class="user-ctrl-box">
                <div class="upload">
                  <input id="imageInput" type="file" name="file" @change="changeImage">
                </div>
                <div class="user-ctrl">
                  <div class="title"><img src="./img/name-ctrl-title.png"></div>
                  <div class="textarea">
                    <textarea v-model="nickname" maxlength="20" placeholder="输入你的名字（字数限制10字）"></textarea>
                  </div>
                  <div @click="gotoAudio" class="btn"><img src="./img/btn-name.png"></div>
                </div>
              </div>
            </transition>
            <transition name="page-fade">
              <div v-show="step == 2" class="audio-ctrl">
                <div class="title"><img src="./img/page-3-audio-title.png"></div>
                <div class="btns">
                  <div v-show="audioId != null" @click="playAudio" class="btn btn-audition fadeIn animated"><img src="./img/icon-audio-play.png"><span>试 听</span></div>
                  <div class="btn btn-start">
                    <div v-show="!recordStarting" @click="recordStart" class="start"><img src="./img/icon-audio-start.png"></div>
                    <div v-show="recordStarting" @click="recordStop" class="stop"><img src="./img/icon-audio-restart.png"></div><span>{{!recordStarting?'录 音':'停止 '+count+'s'}}</span>
                  </div>
                  <div v-show="audioId != null" @click="uploadAudio" class="btn btn-upload fadeIn animated"><img src="./img/icon-audio-right.png"><span>完 成</span></div>
                </div>
              </div>
            </transition>
            <transition name="page-fade">
              <div v-show="step == 3" class="message-ctrl">
                <div class="title"><img src="./img/message-ctrl-title.png"></div>
                <div class="textarea">
                  <textarea v-model="text" maxlength="64" placeholder="你发声了什么？（字数限制32字）"></textarea>
                </div>
                <div @click="selectSingerStart" class="btn"><img src="./img/btn-create.png"></div>
              </div>
            </transition>
            <transition name="page-fade">
              <div v-show="step == 4" class="singer-ctrl">
                <div class="title"><img src="./img/singer-title.png"></div>
                <div class="singers">
                  <div :class="{p3: (singerIndex-3) &gt;= 1,p2: (singerIndex-2) == 1,p1: (singerIndex-1) == 1,on: singerIndex == 1,n1: (singerIndex+1) == 1,n2: (singerIndex+2) == 1,n3: (singerIndex+3) &lt;= 1}" class="singer"><img src="./img/singer-1.jpg"></div>
                  <div :class="{p3: (singerIndex-3) &gt;= 2,p2: (singerIndex-2) == 2,p1: (singerIndex-1) == 2,on: singerIndex == 2,n1: (singerIndex+1) == 2,n2: (singerIndex+2) == 2,n3: (singerIndex+3) &lt;= 2}" class="singer"><img src="./img/singer-2.jpg"></div>
                  <div :class="{p3: (singerIndex-3) &gt;= 3,p2: (singerIndex-2) == 3,p1: (singerIndex-1) == 3,on: singerIndex == 3,n1: (singerIndex+1) == 3,n2: (singerIndex+2) == 3,n3: (singerIndex+3) &lt;= 3}" class="singer"><img src="./img/singer-3.jpg"></div>
                  <div :class="{p3: (singerIndex-3) &gt;= 4,p2: (singerIndex-2) == 4,p1: (singerIndex-1) == 4,on: singerIndex == 4,n1: (singerIndex+1) == 4,n2: (singerIndex+2) == 4,n3: (singerIndex+3) &lt;= 4}" class="singer"><img src="./img/singer-4.jpg"></div>
                  <div :class="{p3: (singerIndex-3) &gt;= 5,p2: (singerIndex-2) == 5,p1: (singerIndex-1) == 5,on: singerIndex == 5,n1: (singerIndex+1) == 5,n2: (singerIndex+2) == 5,n3: (singerIndex+3) &lt;= 5}" class="singer"><img src="./img/singer-5.jpg"></div>
                  <div @click="singerPrev" class="left"><img src="./img/icon-left.png"></div>
                  <div @click="singerNext" class="right"><img src="./img/icon-left.png"></div>
                </div>
                <div @click="review" class="btn"><img src="./img/btn-build.png"></div>
              </div>
            </transition>
            <transition name="page-fade">
              <div v-show="step == 5" class="review-ctrl">
                <div class="btns">
                  <div @click="over" class="btn btn-share"><img src="./img/btn-share.png"></div>
                  <div href="http://levi.arkrdigital.com/music/" class="btn btn-more"><img src="./img/btn-more.png"></div>
                </div>
              </div>
            </transition>
          </div>
        </div>
      </transition>
      <transition name="page-fade">
        <div v-show="allowPopShow" class="pop pop-allow">
          <div class="content">
            <div class="allow-box"><img src="./img/pop-reg.png">
              <div class="btns">
                <div @click="allowTRUE" class="btn btn-yes"><img src="./img/btn-yes.png"></div>
                <div @click="allowFALSE" class="btn btn-no"><img src="./img/btn-no.png"></div>
              </div>
            </div>
          </div>
        </div>
      </transition>
      <transition name="page-fade">
        <div v-show="pageInfoShow" class="pop">
          <div class="content"><img :src="ugc">
            <div class="p">长按保存图片</div>
          </div>
        </div>
      </transition>
    </div>
    <script src="//res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
    <script src="//image.giccoo.com/projects/libs/js/min/vue.min.js"></script>
    <script src="//image.giccoo.com/projects/libs/js/min/pixi.min.js"></script>
    <script src="//image.giccoo.com/projects/libs/js/min/TweenMax.min.js"></script>
    <script src="//image.giccoo.com/projects/libs/js/min/axios.min.js"></script>
    <script src="//image.giccoo.com/projects/libs/js/min/qrcode.min.js"></script>
    <script src="//s3.music.126.net/static/mob/ntes.id.js"></script>
    <script src="//s5.music.126.net/static_public/5a1b70ea0180f6ca7295a59d/js/music-jssdk-1.0.3.js"></script>
    <script src="js/main.js?v=2"></script>
  </body>
</html>