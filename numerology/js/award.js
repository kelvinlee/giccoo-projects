"use strict";var _updateNames,apiURL,ask,ask_award,ask_my,ask_update,awardBox,awardPop,initAward,initPop,openAward,shareContent,updateShareContent;apiURL="api.giccoo.com",axios.defaults.withCredentials=!0,_updateNames={game1:!1,game2:!1,game3:!1,share:!1},awardPop={},awardBox={},shareContent={title:"奇门遁甲，乾坤万象，其乐无穷，12.15日，燃情上映！",desc:"乾坤万象，其乐无穷，12.15日，燃情上映！",link:"http://m.giccoo.com/numerology/",imgUrl:"http://m.giccoo.com/numerology/img/ico.jpg",success:function e(){return ask_update(3)},cancel:function e(){}},window.onload=function(){var e,a;return a=document.getElementsByTagName("body")[0],e=a.offsetWidth/a.offsetHeight,(a.offsetHeight<=480||e>.65)&&(a.className="iphone4"),a.offsetWidth>=640&&(a.className="pc"),ask(function(e){var a;return console.log(e),a=0,null!=e.info&&(a=e.info.count-e.info.award),initAward(a),initPop()})},openAward=function e(){return $("#award").fadeIn()},initAward=function e(a){return awardBox=new Vue({el:"#award",data:{start:!1,times:a,boxClass:"on"},methods:{go:function e(){var a;return a=this,this.times-1>0&&(this.times=this.times-1),ask_award(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",n=arguments[2];return 200===e?(a.boxClass="open "+t,setTimeout(function(){return awardPop.type=t,awardPop.success=!0,awardPop.code=n,$("#award-over").fadeIn()},3500)):(a.boxClass="open none",setTimeout(function(){return awardPop.success=!1,$("#award-over").fadeIn()},3500))})},my:function e(){return ask_my(function(e){return console.log(e[0]),e.length>0?(awardPop.success=!0,awardPop.type=e[0].type,awardPop.code=e[0].code,$("#award-over").fadeIn()):(awardPop.success=!1,$("#award-over").fadeIn())})},back:function e(){return $("#award").fadeOut()},default:function e(){return this.boxClass="on"}}})},initPop=function e(){return awardPop=new Vue({el:"#award-over",data:{how:!1,success:!1,share:!1,type:"ticket",code:"none"},methods:{openHow:function e(){return this.how=!this.how},openShare:function e(){return this.share=!this.share},close:function e(){return awardBox.default(),$("#award-over").fadeOut()}}})},ask=function e(a){return axios.get("http://"+apiURL+"/wechat/numerology/ask/").then(function(e){return console.log("msg:",e.data),200===e.data.recode?a(e.data):window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx15cc4d73cb0b6437&redirect_uri={url}&response_type=code&scope=snsapi_base&state=123#wechat_redirect".replace("{url}",encodeURIComponent("http://"+apiURL+"/wechat/numerology/"))}).catch(function(e){})},ask_update=function e(a){var t,n;return n=["game1","game2","game3","share"],t=n[a],a<3&&(0===a&&(shareContent.title="我的江湖绝学是雾隐门排行第五的“千里眼”！ 12.15日《奇门遁甲》全国首映，侠客天团强势来袭，热血江湖等你来战！"),1===a&&(shareContent.title="我的江湖绝学是雾隐门排行第四的“顺风耳”！ 12.15日《奇门遁甲》全国首映，侠客天团强势来袭，热血江湖等你来战！"),2===a&&(shareContent.title="我的江湖绝学是雾隐门排行第七的“霹雳火”！ 12.15日《奇门遁甲》全国首映，侠客天团强势来袭，热血江湖等你来战！"),updateShareContent(shareContent)),!_updateNames[t]&&axios.get("http://"+apiURL+"/wechat/numerology/update/").then(function(e){return console.log("msg:",e.data),200===e.data.recode?(_updateNames[t]=!0,awardBox.times=awardBox.times+1):201===e.data.recode?alert("请使用微信打开此页面参与活动"):void 0}).catch(function(e){return alert("服务器请求失败,请重试")})},ask_award=function e(a){return axios.get("http://"+apiURL+"/wechat/numerology/award/").then(function(e){return console.log("msg:",e.data),200===e.data.recode?a(200,e.data.info.type,e.data.info.code):301===e.data.recode?a(301):alert(e.data.reason)}).catch(function(e){return alert("服务器请求失败,请重试")})},ask_my=function e(a){return axios.get("http://"+apiURL+"/wechat/numerology/my/").then(function(e){return console.log("msg:",e.data),200===e.data.recode?a(e.data.info):alert(e.data.reason)}).catch(function(e){return alert("服务器请求失败,请重试")})},updateShareContent=function e(a){return console.log(a),wx.onMenuShareTimeline(a),wx.onMenuShareAppMessage(a),wx.onMenuShareQQ(a),wx.onMenuShareWeibo(a)};