define(["utils/appFunc"],function(t){var e=$CONFIG.apiPath,a={getRequestURL:function(a){var n,o=e||window.location.host,i=(a.port||window.location.port,a.query||{}),r=a.func||"",d=o+"/"+r+(t.isEmpty(i)?"":"?");for(n in i)d+=n+"="+i[n]+"&";return d.replace(/&$/gi,"")},ajaxCall:function(t,e){t=t||{},t.data=t.data?t.data:"",t.method=t.method||"POST",$$.ajax({url:a.getRequestURL(t),method:t.method,data:t.data,error:function(){NMAPP.hideIndicator(),NMAPP.alert("\u670d\u52a1\u5668\u6709\u70b9\u62bd\u7b4b\u4e86")
},complete:function(){NMAPP.hideIndicator()},success:function(t){t=t?JSON.parse(t):"",t?"function"==typeof e?e(t):"":NMAPP.alert("\u7f51\u7edc\u9519\u8bef",function(){NMAPP.hideIndicator(),NMAPP.hidePreloader()})}})}};return a});